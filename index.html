<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Académico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href="https://visjs.github.io/vis-timeline/styles/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />
    <!-- PDF Viewer Styles -->
    <link rel="stylesheet" href="assets/base.min.css"/>
    <link rel="stylesheet" href="assets/fancy.min.css"/>
    <link rel="stylesheet" href="assets/main.css"/>
    <style>
      /* ---------------------------------- */
      /* Component: General Styles */
      /* ---------------------------------- */
      body {
          margin: 0;
          padding: 0;
          height: 100vh;
          display: flex;
          flex-direction: column;
      }

      #app {
          flex: 1;
          display: flex;
          flex-direction: column;
          min-height: 0;
      }
      /* ---------------------------------- */
      /* End Component: General Styles */
      /* ---------------------------------- */

      /* ---------------------------------- */
      /* Component: FullCalendar Styles */
      /* ---------------------------------- */
      .fc {
          flex: 1;
          min-height: 0;
          height: 100%;
      }

      .fc-header-toolbar {
          display: none !important;
      }

      .fc-event {
          cursor: pointer;
          border: none !important;
          border-left: 4px solid !important;
          padding: 2px 4px !important;
          margin: 1px 2px !important;
      }

      .fc-daygrid-day-number {
          padding: 4px !important;
      }

      .fc-day-today {
          background-color: rgba(147, 197, 253, 0.2) !important;
      }

      .fc-dayGridMonth-view .fc-daygrid-body {
          height: 100% !important;
      }

      .fc-dayGridMonth-view .fc-scrollgrid-section-body {
          height: calc(100% - 40px) !important;
      }

      .fc-dayGridMonth-view .fc-daygrid-day-frame {
          min-height: 0 !important;
          height: 100% !important;
      }

      .fc-dayGridMonth-view .fc-daygrid-day-events {
          flex-grow: 1;
      }

      .fc-dayGridWeek-view .fc-daygrid-body {
          height: auto !important;
      }

      .fc-dayGridWeek-view .fc-daygrid-day-frame {
          min-height: 120px !important;
      }

      .fc-dayGridWeek-view .fc-daygrid-day-events {
          margin: 0 !important;
      }

      .fc-dayGridWeek-view .fc-daygrid-event {
          margin-top: 2px !important;
          margin-bottom: 2px !important;
      }

      .fc-daygrid-event:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      .fc-daygrid-day.fc-day-disabled {
          background-color: #f9fafb !important;
      }

      .fc-event-title {
          white-space: normal !important;
      }

      .fc-dayGridWeek-view .fc-col-header-cell {
          position: relative;
          text-align: center;
      }

      .fc-dayGridWeek-view .fc-col-header-cell .fc-day-name {
          display: inline-block;
          margin-right: 0.5rem;
          font-weight: normal;
          vertical-align: middle;
      }

      .fc-dayGridWeek-view .fc-col-header-cell .fc-day-number {
          display: inline-block;
          font-size: 1.5rem;
          font-weight: bold;
          color: #3b82f6;
          vertical-align: middle;
      }

      .fc-dayGridWeek-view .fc-day-today .fc-day-number {
          color: #1d4ed8;
          align-items: center;
          justify-content: center;
          line-height: 1;
      }

      @media (max-width: 768px) {
          .fc-dayGridMonth-view .fc-daygrid-day-frame {
              min-height: 60px !important;
          }
          .fc-dayGridWeek-view .fc-daygrid-day-frame {
              min-height: 100px !important;
          }
          .fc-dayGridWeek-view .fc-col-header-cell .fc-day-number {
              font-size: 1rem;
          }
          .fc-dayGridWeek-view .fc-col-header-cell .fc-day-name {
              margin-top: 1.5rem;
              font-size: 0.8rem;
          }
      }
      /* ---------------------------------- */
      /* End Component: FullCalendar Styles */
      /* ---------------------------------- */

      /* ---------------------------------- */
      /* Component: Custom Select Styles */
      /* ---------------------------------- */
      .custom-select {
          position: relative;
          width: 100%;
      }

      .custom-select input {
          width: 100%;
          padding: 0.5rem 0.75rem;
          border: 1px solid #d1d5db;
          border-radius: 0.375rem;
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
          outline: none;
      }

      .custom-select input:focus {
          ring: 2px solid #3b82f6;
          border-color: #3b82f6;
      }

      .custom-select .options {
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          background: white;
          border: 1px solid #d1d5db;
          border-radius: 0.375rem;
          max-height: 200px;
          overflow-y: auto;
          z-index: 10;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .custom-select .option {
          padding: 0.5rem 0.75rem;
          cursor: pointer;
      }

      .custom-select .option:hover {
          background: #dbeafe;
          color: #1e40af;
      }
      /* ---------------------------------- */
      /* End Component: Custom Select Styles */
      /* ---------------------------------- */

      /* ---------------------------------- */
      /* Component: Timeline Styles */
      /* ---------------------------------- */
      #timeline {
          flex: 1;
          overflow-y: auto;
          background-color: #fff;
      }

      .vis-timeline {
          border: 1px solid #ddd;
          height: 100%;
      }

      .tooltip {
          position: absolute;
          background: #fff;
          border: 1px solid #ccc;
          padding: 5px;
          border-radius: 4px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          z-index: 1000;
          display: none;
      }

      .vis-item {
          font-size: 10px;
          padding: 1px;
          white-space: nowrap;
          overflow: hidden;
      }

      .vis-time-axis .vis-text {
          font-size: 10px;
      }

      .vis-group {
          background-color: #f5f5f5;
      }

      .vis-group-level-0 {
          font-weight: bold;
      }

      .vis-group-level-1 {
          padding-left: 20px;
      }

      .vis-group-level-2 {
          padding-left: 40px;
      }
      /* ---------------------------------- */
      /* End Component: Timeline Styles */
      /* ---------------------------------- */

      /* ---------------------------------- */
      /* Component: Modal Styles */
      /* ---------------------------------- */
      .modal {
          transition: opacity 0.3s ease;
      }

      .timeline-modal {
          position: fixed;
          z-index: 1001;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
      }

      .timeline-modal-content {
          background-color: #fff;
          margin: 15% auto;
          padding: 20px;
          border: 1px solid #888;
          width: 80%;
          max-width: 400px;
          border-radius: 5px;
      }

      .timeline-modal-content .close {
          color: #aaa;
          float: right;
          font-size: 28px;
          font-weight: bold;
          cursor: pointer;
      }

      .timeline-modal-content .close:hover,
      .timeline-modal-content .close:focus {
          color: black;
          text-decoration: none;
      }

      .timeline-modal-content input,
      .timeline-modal-content select {
          width: 100%;
          margin: 5px 0;
          padding: 5px;
      }

      .timeline-modal-content button {
          margin-top: 10px;
          padding: 5px 10px;
      }
      /* ---------------------------------- */
      /* End Component: Modal Styles */
      /* ---------------------------------- */

      /* ---------------------------------- */
      /* Component: Grid Layout Styles */
      /* ---------------------------------- */
      .grid-cols-5 {
          display: grid;
          grid-template-columns: repeat(5, 1fr);
          gap: 1rem;
      }

      .col-span-3 {
          grid-column: span 3 / span 3;
      }
      /* ---------------------------------- */
      /* End Component: Grid Layout Styles */
      /* ---------------------------------- */

      /* ---------------------------------- */
      /* Component: visorPDF Styles */
      /* ---------------------------------- */
      #visorPDF {
            flex: 1;
            overflow-y: auto;
            background-color: #fff;
            padding: 1rem;
        }
        #page-container {
            padding: 10px;
        }
        .pf {
            position: relative;
            margin-bottom: 10px;
        }
        .loading-indicator {
            display: none;
        }
        /* Ensure PDF viewer fits within the app layout */
        #visorPDF .pf {
            max-width: 100%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
      /* ---------------------------------- */
      /* End Component: visorPDF Styles */
      /* ---------------------------------- */
      </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- ---------------------------------- -->
        <!-- Component: Header -->
        <!-- ---------------------------------- -->
        <header class="bg-blue-600 text-white shadow-lg">
            <div class="px-4 py-3">
                <div class="flex flex-col md:flex-row md:justify-between md:items-center space-y-2 md:space-y-0">
                    <div class="flex items-center justify-between">
                        <h1 class="text-xl md:text-2xl font-bold">Calendario Académico</h1>
                        <div class="md:hidden">
                            <button @click="setView('dayGridMonth')" :class="{'bg-blue-700': currentView === 'dayGridMonth'}" class="p-2 rounded-md">
                                <i class="fas fa-calendar-alt"></i>
                            </button>
                            <button @click="setView('dayGridWeek')" :class="{'bg-blue-700': currentView === 'dayGridWeek'}" class="p-2 rounded-md">
                                <i class="fas fa-calendar-week"></i>
                            </button>
                            <button @click="goToToday" class="p-2 rounded-md">
                                <i class="fas fa-calendar-day"></i>
                            </button>
                        </div>
                    </div>
                    <div class="flex items-center justify-between space-x-2">
                        <div class="flex items-center space-x-2">
                            <button @click="navigate('prev')" class="p-2 rounded-full hover:bg-blue-700">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <h2 id="calendar-title" class="text-base md:text-lg font-semibold">
                                {{ getTitle() }}
                            </h2>
                            <button @click="navigate('next')" class="p-2 rounded-full hover:bg-blue-700">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div class="hidden md:flex space-x-2 ml-4">
                            <button @click="setView('dayGridMonth')" :class="{'bg-blue-700': currentView === 'dayGridMonth'}" class="px-3 py-1 rounded-md flex items-center">
                                <i class="fas fa-calendar-alt mr-2"></i>
                                <span>Mes</span>
                            </button>
                            <button @click="setView('dayGridWeek')" :class="{'bg-blue-700': currentView === 'dayGridWeek'}" class="px-3 py-1 rounded-md flex items-center">
                                <i class="fas fa-calendar-week mr-2"></i>
                                <span>Semana</span>
                            </button>
                            <button @click="goToToday" class="px-3 py-1 rounded-md flex items-center hover:bg-blue-700">
                                <i class="fas fa-calendar-day mr-2"></i>
                                <span>Hoy</span>
                            </button>
                            <button @click="openPeriodoModal" class="px-3 py-1 rounded-md flex items-center justify-center hover:bg-blue-700">
                                <i class="fas fa-calendar mr-2"></i>
                                <span>Periodo</span>
                            </button>
                            <button @click="toggleTimeline" :class="{'bg-blue-700': showTimeline}" class="px-3 py-1 rounded-md flex items-center justify-center hover:bg-blue-700">
                                <i class="fas fa-list-alt mr-2"></i>
                                <span>Cronograma</span>
                            </button>
                            <button @click="toggleVisorPDF" :class="{'bg-blue-700': showVisorPDF}" class="px-3 py-1 rounded-md flex items-center justify-center hover:bg-blue-700">
                                <i class="fas fa-file-pdf mr-2"></i>
                                <span>Visor PDF</span>
                            </button>
                            <button @click="openTercerosModal" class="px-3 py-1 rounded-md flex items-center justify-center hover:bg-blue-700">
                                <i class="fas fa-users"></i>
                            </button>
                            <button @click="openProgrammingModal" class="px-3 py-1 rounded-md flex items-center justify-center hover:bg-blue-700">
                                <i class="fas fa-list"></i>
                            </button>
                            <button @click="toggleEventLimit" :disabled="currentView !== 'dayGridMonth'" :class="{'bg-blue-700': limitEvents, 'bg-gray-400 cursor-not-allowed': currentView !== 'dayGridMonth'}" class="px-3 py-1 rounded-md flex items-center justify-center hover:bg-blue-700">
                                <i :class="limitEvents ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- ---------------------------------- -->
        <!-- End Component: Header -->
        <!-- ---------------------------------- -->

        <!-- ---------------------------------- -->
        <!-- Component: Calendar -->
        <!-- ---------------------------------- -->
        <div id="calendar" class="flex-1" v-show="!showTimeline"></div>
        <!-- ---------------------------------- -->
        <!-- End Component: Calendar -->
        <!-- ---------------------------------- -->

        <!-- ---------------------------------- -->
        <!-- Component: Timeline -->
        <!-- ---------------------------------- -->
        <div id="timeline" class="flex-1" v-show="showTimeline">
            <div ref="timelineContainer"></div>
            <div v-if="timelineModalState.isOpen" class="timeline-modal">
                <div class="timeline-modal-content">
                    <span class="close" @click="closeTimelineModal">×</span>
                    <h2>{{ timelineModalState.action === 'add' ? 'Añadir Evento' : 'Editar Evento' }}</h2>
                    <form @submit.prevent="handleTimelineModalSubmit">
                        <label for="eventTitle">Título:</label>
                        <input
                            type="text"
                            id="eventTitle"
                            v-model="timelineModalState.eventData.content"
                            required
                        />
                        <label for="eventGroup">Tercero:</label>
                        <select
                            id="eventGroup"
                            v-model="timelineModalState.eventData.group"
                            required
                        >
                            <option v-for="tercero in terceros" :key="tercero.id" :value="tercero.id">
                                {{ tercero.nombreTercero }}
                            </option>
                        </select>
                        <label for="eventStart">Fecha de Inicio:</label>
                        <input
                            type="date"
                            id="eventStart"
                            v-model="timelineModalState.eventData.start"
                            required
                        />
                        <label for="eventEnd">Fecha de Fin:</label>
                        <input
                            type="date"
                            id="eventEnd"
                            v-model="timelineModalState.eventData.end"
                            required
                        />
                        <button type="submit">Guardar</button>
                    </form>
                </div>
            </div>
        </div>
        <div id="tooltip" class="tooltip"></div>
        <!-- ---------------------------------- -->
        <!-- End Component: Timeline -->
        <!-- ---------------------------------- -->

        <!-- ---------------------------------- -->
        <!-- Component: Visor PDF -->
        <!-- ---------------------------------- -->
        <div id="visorPDF" class="flex-1" v-show="showVisorPDF">
            <div id="page-container">
                <button @click="generatePDF" class="mb-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                    Generar PDF
                </button>
                <!-- Added hidden #outline element to satisfy theViewer -->
                <div id="outline" style="display: none;"></div>
                <div id="pf1" class="pf w0 h0" data-page-no="1"><div class="pc pc1 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="assets/bg1.png"/><div class="c x1 y1 w2 h2"><div class="t m0 x2 h3 y2 ff1 fs0 fc0 sc0 ls0 ws0">FORMATO DE AUTORIZACIÓN, SOLICITUD DE TRÁMITE Y AUTOLIQUIDACIÓN DE COMISIONES</div><div class="t m0 x2 h3 y3 ff1 fs0 fc0 sc0 ls0 ws0">DE SERVICIOS Y SALIDAS DE CAMPO AL INTERIOR DEL PAÍS DE CATEDRÁTICOS, DOCENTES</div><div class="t m0 x3 h3 y4 ff1 fs0 fc0 sc0 ls0 ws0">CAPACITADORES E INVESTIGADORES</div></div><div class="c x4 y5 w3 h4"><div class="t m0 x5 h3 y6 ff1 fs0 fc0 sc0 ls0 ws0">CODIGO: GF-FO-023</div></div><div class="c x4 y7 w3 h5"><div class="t m0 x5 h3 y8 ff1 fs0 fc0 sc0 ls0 ws0">VERSION: 04</div></div><div class="c x4 y1 w3 h4"><div class="t m0 x5 h3 y9 ff1 fs0 fc0 sc0 ls0 ws0">FECHA: 03/04/2025</div></div><div class="c x0 ya w4 h6"><div class="t m1 x6 h7 yb ff2 fs1 fc1 sc1 ls0 ws0">D i l i g e n c i e    o    s e l e c c i o n e    ú n i c a m e n t e     y     a     c o m p l e t i t u d     l o s     c a m p o s     e n     g r i s</div></div><div class="c x0 yc w5 h8"><div class="t m0 x5 h3 yd ff1 fs0 fc2 sc2 ls0 ws0">Dependencia solicitante:</div></div><div class="c x7 yc w6 h8"><div class="t m0 x8 h3 yd ff1 fs0 fc2 sc2 ls0 ws0">0072DP - DECANATURA PREGRADO</div></div><div class="c x9 yc w7 h8"><div class="t m0 xa h3 yd ff1 fs0 fc2 sc2 ls0 ws0">FECHA DE AUTOLIQUIDACIÓN</div></div><div class="c x4 yc w3 h8"><div class="t m0 xb h3 yd ff1 fs0 fc2 sc2 ls0 ws0">5/3/2025</div></div><div class="c x0 ye w4 h9"><div class="t m0 x5 h3 yf ff1 fs0 fc2 sc2 ls0 ws0">1. DATOS DEL CATEDRÁTICO / INVESTIGADOR / DOCENTE CAPACITADOR</div></div><div class="c x0 y10 w5 ha"><div class="t m0 x5 h3 y11 ff1 fs0 fc2 sc2 ls0 ws0">Nombre completo</div></div><div class="c x7 y10 w8 ha"><div class="t m0 xc h3 y11 ff1 fs0 fc2 sc2 ls0 ws0">MYRIAM NOCUA VALDERRAMA</div></div><div class="c xd y10 w9 ha"><div class="t m0 xe h3 y11 ff1 fs0 fc2 sc2 ls0 ws0">Fecha de Nacimiento (dd/mm/aaaa)</div></div><div class="c xf y10 wa ha"><div class="t m0 x5 h3 y12 ff1 fs0 fc2 sc2 ls0 ws0">15 DE NOVIEMBRE</div><div class="t m0 x5 h3 y13 ff1 fs0 fc2 sc2 ls0 ws0">DE 1963</div></div><div class="c x0 y14 w5 hb"><div class="t m0 x5 h3 y15 ff1 fs0 fc2 sc2 ls0 ws0">C.C. No.</div></div><div class="c x7 y14 wb hb"><div class="t m0 xc h3 y15 ff1 fs0 fc2 sc2 ls0 ws0">46,661,468</div></div><div class="c x10 y14 wc hb"><div class="t m0 x5 h3 y15 ff1 fs0 fc2 sc2 ls0 ws0">Correo electrónico</div></div><div class="c x9 y14 wd hb"><div class="t m0 x5 hc y15 ff3 fs0 fc2 sc3 ls0 ws0">myriam.nocua@esap.edu.co</div></div><div class="c x0 y16 w5 hd"><div class="t m0 x5 h3 y17 ff1 fs0 fc2 sc2 ls0 ws0">Teléfono de contacto y/o</div><div class="t m0 x5 h3 y18 ff1 fs0 fc2 sc2 ls0 ws0">Celular</div></div><div class="c x7 y16 wb hd"><div class="t m0 x11 h3 y19 ff1 fs0 fc2 sc2 ls0 ws0">3014389377</div></div><div class="c x10 y16 wc hd"><div class="t m0 x5 h3 y19 ff1 fs0 fc2 sc2 ls0 ws0">Entidad Bancaria</div></div><div class="c x9 y16 wd hd"><div class="t m0 x12 he y19 ff4 fs0 fc2 sc3 ls0 ws0">BANCO DAVIVIENDA S.A.</div></div><div class="c x0 y1a w5 hb"><div class="t m0 x5 h3 y1b ff1 fs0 fc2 sc2 ls0 ws0">Rol ESAP:</div></div><div class="c x7 y1a w6 hb"><div class="t m0 x13 h3 y1b ff1 fs0 fc2 sc2 ls0 ws0">Docente catedrático - Capacitadores</div></div><div class="c x9 y1a we hb"><div class="t m0 x14 h3 y1b ff1 fs0 fc2 sc2 ls0 ws0">TIPO DE CUENTA:</div></div><div class="c xd y1a wf hb"><div class="t m0 x6 h3 y1b ff1 fs0 fc2 sc2 ls0 ws0">AHORRO</div></div><div class="c x0 y1c w5 hf"><div class="t m0 x5 h3 y1d ff1 fs0 fc2 sc2 ls0 ws0">Categoría docente</div><div class="t m0 x5 h3 y1e ff1 fs0 fc2 sc2 ls0 ws0">catedrático o investigador</div></div><div class="c x7 y1c w6 hf"><div class="t m0 x7 h3 y1f ff1 fs0 fc2 sc2 ls0 ws0">ASOCIADO</div></div><div class="c x9 y1c we hf"><div class="t m0 x15 h3 y1f ff1 fs0 fc2 sc2 ls0 ws0">No. DE CUENTA:</div></div><div class="c xd y1c wf hf"><div class="t m0 x13 h3 y1f ff1 fs0 fc2 sc2 ls0 ws0">0550488428021775</div></div><div class="c x0 y20 w4 h10"><div class="t m0 x5 h3 y21 ff1 fs0 fc2 sc2 ls0 ws0">2. DATOS DE LA COMISIÓN DE SERVICIOS O SALIDA DE CAMPO</div></div><div class="c x0 y22 w5 h11"><div class="t m0 x16 h3 y23 ff1 fs0 fc2 sc2 ls0 ws0">Duración de la comisión de</div><div class="t m0 x16 h3 y24 ff1 fs0 fc2 sc2 ls0 ws0">servicios o salida de campo</div><div class="t m0 x17 h3 y25 ff1 fs0 fc2 sc2 ls0 ws0">en días:</div></div><div class="c x7 y22 w10 h11"><div class="t m0 x18 h3 y26 ff1 fs0 fc2 sc2 ls0 ws0">1.5</div></div><div class="c x1 y27 w11 h12"><div class="t m0 x19 h3 y28 ff1 fs0 fc2 sc2 ls0 ws0">Fecha de inicio</div></div><div class="c x10 y27 wc h12"><div class="t m0 x17 hc y29 ff3 fs0 fc2 sc3 ls0 ws0">5/9/2025</div></div><div class="c x9 y27 we h12"><div class="t m0 x1a h3 y28 ff1 fs0 fc2 sc2 ls0 ws0">Hora de vuelo ida:</div><div class="t m0 xb h3 y2a ff1 fs0 fc2 sc2 ls0 ws0">(estimada</div></div><div class="c xd y27 w12 h12"><div class="t m0 xa hc y29 ff3 fs0 fc2 sc3 ls0 ws0">7:00</div></div><div class="c x4 y27 w3 h12"><div class="t m0 x1b h3 y29 ff1 fs0 fc2 sc2 ls0 ws0">Itinerario detallado:</div></div><div class="c x1 y22 w11 h13"><div class="t m0 x1c h3 y2b ff1 fs0 fc2 sc2 ls0 ws0">Fecha de finalización</div></div><div class="c x10 y22 wc h13"><div class="t m0 x1d hc y2b ff3 fs0 fc2 sc3 ls0 ws0">5/10/2025</div></div><div class="c x9 y22 we h13"><div class="t m0 x0 h3 y2c ff1 fs0 fc2 sc2 ls0 ws0">Hora de vuelo regreso:</div><div class="t m0 x1e h3 y2d ff1 fs0 fc2 sc2 ls0 ws0">(estimada)</div></div><div class="c xd y22 w12 h13"><div class="t m0 x19 hc y2b ff3 fs0 fc2 sc3 ls0 ws0">16:00</div></div><div class="c x4 y22 w3 h13"><div class="t m0 x0 h14 y2e ff3 fs2 fc3 sc3 ls0 ws0">CALI-GUADALAJARA DE BUGA-CALI</div></div><div class="c x0 y2f w5 h8"><div class="t m0 x5 h3 y30 ff1 fs0 fc2 sc2 ls0 ws0">Departamento</div></div><div class="c x7 y2f w6 h8"><div class="t m0 x1f h3 y30 ff1 fs0 fc2 sc2 ls0 ws0">VALLE DEL CAUCA</div></div><div class="c x9 y2f w7 h8"><div class="t m0 x20 h3 y30 ff1 fs0 fc2 sc2 ls0 ws0">Requiere tiquetes aéreos</div></div><div class="c x4 y2f w3 h8"><div class="t m0 x8 h3 y30 ff1 fs0 fc2 sc2 ls0 ws0">NO</div></div><div class="c x0 y31 w5 h15"><div class="t m0 x5 h3 y32 ff1 fs0 fc2 sc2 ls0 ws0">Municipio / Isla / área no</div><div class="t m0 x5 h3 y33 ff1 fs0 fc2 sc2 ls0 ws0">municipalizada</div></div><div class="c x7 y31 w6 h15"><div class="t m0 x6 h3 y34 ff1 fs0 fc2 sc2 ls0 ws0">GUADALAJARA DE BUGA</div></div><div class="c x9 y31 w7 h15"><div class="t m0 x21 h3 y34 ff1 fs0 fc2 sc2 ls0 ws0">Aeropuerto Destino</div></div><div class="c x4 y31 w3 h15"><div class="t m0 xa h3 y34 ff1 fs0 fc2 sc2 ls0 ws0">VALLE DEL CAUCA (Palmira)</div></div><div class="c x0 y35 w5 h16"><div class="t m0 x5 h3 y36 ff1 fs0 fc2 sc2 ls0 ws0">Objeto</div></div><div class="c x7 y35 w13 h16"><div class="t m0 x5 hc y36 ff3 fs0 fc2 sc3 ls0 ws0">DICTAR ASIGNATURA DE TEORIAS Y ENFOQUES DEL DESARROLLO EN EL CENTRO DE TUTORIA DE GUADALAJARA DE BUGA DEL 09-05-2025 AL 10-05-2025</div></div><div class="c x0 y37 w4 h8"><div class="t m0 x5 h3 y38 ff1 fs0 fc2 sc2 ls0 ws0">3. LIQUIDACIÓN DE LA COMISIÓN DE SERVICIOS O SALIDA DE CAMPO</div></div><div class="c x0 y39 w14 h17"><div class="t m0 x22 h3 y3a ff1 fs0 fc2 sc2 ls0 ws0">Descripción del día</div></div><div class="c x10 y39 wc h17"><div class="t m0 x18 h3 y3a ff1 fs0 fc2 sc2 ls0 ws0">No. de Días</div></div><div class="c x9 y39 w7 h17"><div class="t m0 x23 h3 y3a ff1 fs0 fc2 sc2 ls0 ws0">Viáticos Diario</div></div><div class="c x4 y39 w3 h17"><div class="t m0 x24 h3 y3a ff1 fs0 fc2 sc2 ls0 ws0">Total</div></div><div class="c x0 y3b w14 h17"><div class="t m0 x25 hc y3c ff3 fs0 fc2 sc3 ls0 ws0">Pernoctados</div></div><div class="c x10 y3b wc h17"><div class="t m0 x21 hc y3c ff3 fs0 fc2 sc3 ls0 ws0">1</div></div><div class="c x9 y3b w7 h17"><div class="t m0 x5 hc y3c ff3 fs0 fc2 sc3 ls0 ws0">$ <span class="_ _0"> </span>293,886</div></div><div class="c x4 y3b w3 h17"><div class="t m0 x5 hc y3c ff3 fs0 fc2 sc3 ls0 ws0">$ <span class="_ _1"> </span>293,886</div></div><div class="c x0 y3d w14 h17"><div class="t m0 x26 hc y3e ff3 fs0 fc2 sc3 ls0 ws0">No Pernoctados</div></div><div class="c x10 y3d wc h17"><div class="t m0 x21 hc y3e ff3 fs0 fc2 sc3 ls0 ws0">1</div></div><div class="c x9 y3d w7 h17"><div class="t m0 x5 hc y3e ff3 fs0 fc2 sc3 ls0 ws0">$ <span class="_ _0"> </span>146,943</div></div><div class="c x4 y3d w3 h17"><div class="t m0 x5 hc y3e ff3 fs0 fc2 sc3 ls0 ws0">$ <span class="_ _1"> </span>146,943</div></div><div class="c x0 y3f w15 h17"><div class="t m0 x27 h3 y40 ff1 fs0 fc2 sc2 ls0 ws0">Total Viáticos o auxilio económico de desplazamiento</div></div><div class="c x4 y3f w3 h17"><div class="t m0 x5 h3 y40 ff1 fs0 fc2 sc2 ls0 ws0">$ <span class="_ _1"> </span>440,829</div></div><div class="c x0 y41 w4 h17"><div class="t m0 x5 h3 y42 ff1 fs0 fc2 sc2 ls0 ws0">4. LIQUIDACIÓN DE GASTOS DE TRANSPORTE Y/O AUXILIOS ECONÓMICOS DE DESPLAZAMIENTO</div></div><div class="c x0 y43 w14 h17"><div class="t m0 x28 h3 y44 ff1 fs0 fc2 sc2 ls0 ws0">Descripción</div></div><div class="c x10 y43 w16 h17"><div class="t m0 x29 h3 y44 ff1 fs0 fc2 sc2 ls0 ws0">Total</div></div><div class="c x0 y45 w14 h18"><div class="t m0 x15 h3 y46 ff1 fs0 fc2 sc2 ls0 ws0">Total gastos de transporte / auxilios económicos de desplazamientos</div><div class="t m0 x2a h3 y47 ff1 fs0 fc2 sc2 ls0 ws0">terminales aéreos</div></div><div class="c x10 y45 w16 h18"><div class="t m0 x5 h3 y48 ff1 fs0 fc2 sc2 ls0 ws0">$ <span class="_ _2"> </span>-</div></div><div class="c x0 y49 w14 h18"><div class="t m0 x16 h3 y4a ff1 fs0 fc2 sc2 ls0 ws0">Transporte y desplazamiento por vía terrestre, marítimo, fluvial y/o ferroviario</div></div><div class="c x10 y49 w16 h18"><div class="t m0 x5 h3 y4a ff1 fs0 fc2 sc2 ls0 ws0">$ <span class="_ _3"> </span>29,600.00</div></div><div class="c x0 y4b w14 h18"><div class="t m0 x1c h3 y4c ff1 fs0 fc2 sc2 ls0 ws0">TOTAL GASTOS DE TRANSPORTE Y/O AUXILIOS ECONÓMICOS DE</div><div class="t m0 x1f h3 y4d ff1 fs0 fc2 sc2 ls0 ws0">DESPLAZAMIENTO</div></div><div class="c x10 y4b w16 h18"><div class="t m0 x5 h3 y4e ff1 fs0 fc2 sc2 ls0 ws0">$ <span class="_ _4"> </span>470,429</div></div><div class="c x0 y4f w4 h19"><div class="t m0 x5 h3 y50 ff1 fs0 fc2 sc2 ls0 ws0">5. INFORMACIÓN FINANCIERA DE LA COMISIÓN DE SERVICIOS O SALIDA DE CAMPO</div></div><div class="c x0 y51 w4 h1a"><div class="t m0 x5 hc y52 ff3 fs0 fc2 sc3 ls0 ws0">El pago de la presente comisión de servicios / autorización de desplazamiento, se hará con cargo a 0072DP - DECANATURA PREGRADO, del Rubro C-0503-1000-16-20203K0503014-02, según</div><div class="t m0 x5 hc y53 ff3 fs0 fc2 sc3 ls0 ws0">Certificado de Disponibilidad Presupuestal No. 4325 del 04/02/2025</div></div><div class="c x0 y54 w5 h1b"><div class="t m0 x5 hc y55 ff3 fs0 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 hc y56 ff3 fs0 fc2 sc3 ls0 ws0">________________________</div><div class="t m0 x5 hc y57 ff3 fs0 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 hc y58 ff3 fs0 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 hc y59 ff3 fs0 fc2 sc3 ls0 ws0">____</div><div class="t m0 x5 hc y5a ff3 fs0 fc2 sc3 ls0 ws0">Firma Jefe de Dependencia</div><div class="t m0 x5 hc y5b ff3 fs0 fc2 sc3 ls0 ws0">Firma Gerente de Proyecto</div></div><div class="c x7 y5c wb h1c"><div class="t m0 x18 hc y5d ff3 fs0 fc2 sc3 ls0 ws0">Carmen Marlene Rojas Gallego</div></div><div class="c xd y5c w9 h1c"><div class="t m0 x0 hc y5d ff3 fs0 fc2 sc3 ls0 ws0">Yeimi Viviana Agudo Rodriguez</div></div><div class="c x0 y5e w17 h1d"><div class="t m0 x2b hc y5f ff3 fs0 fc2 sc3 ls0 ws0">Coordinadora Académica</div></div><div class="c x9 y5e wd h1d"><div class="t m0 x2c hc y5f ff3 fs0 fc2 sc3 ls0 ws0">Directora Territorial</div></div><div class="c x0 y60 w15 h1e"><div class="t m0 x5 h1f y61 ff3 fs3 fc2 sc3 ls0 ws0">Elaboró: Carmen Marlene Rojas, Profesional Especializado</div></div><div class="c x4 y62 w3 h20"><div class="t m0 x0 h3 y63 ff1 fs0 fc2 sc2 ls0 ws0">La información recolectada en este</div><div class="t m0 xe h3 y64 ff1 fs0 fc2 sc2 ls0 ws0">documento es tratada bajo la política de</div><div class="t m0 x2d h3 y65 ff1 fs0 fc2 sc2 ls0 ws0">Datos Personales de la ESAP en</div><div class="t m0 x14 h3 y66 ff1 fs0 fc2 sc2 ls0 ws0">cumplimiento a la Ley1581de2012</div></div><div class="c x0 y67 w15 h21"><div class="t m0 x5 h1f y68 ff3 fs3 fc2 sc3 ls0 ws0">Revisó: Carmen Marlene Rojas, Profesional Especializado</div></div><div class="c x0 y62 w15 h22"><div class="t m0 x5 h1f y69 ff3 fs3 fc2 sc3 ls0 ws0">Aprobó: Yeimi Viviana Agudo, Directora Territorial</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
                <div id="pf2" class="pf w18 h23" data-page-no="2"><div class="pc pc2 w18 h23"><img class="bi x0 y0 w19 h24" alt="" src="assets/bg2.png"/><div class="c x2e y6a w1a h25"><div class="t m0 x2f h26 y6b ff1 fs4 fc0 sc0 ls0 ws0">FORMATO DE AUTORIZACIÓN SOLICITUD DE TRÁMITE Y LIQUIDACIÓN DE COMISIÓN DE</div><div class="t m0 x5 h26 y6c ff1 fs4 fc0 sc0 ls0 ws0">SERVICIOS, GASTOS DE TRANSPORTE, GASTOS DE DESPLAZAMIENTO Y AUXILIO ECONÓMICO DE</div><div class="t m0 x30 h26 y6d ff1 fs4 fc0 sc0 ls0 ws0">DESPLAZAMIENTO</div></div><div class="c x31 y6e w1b h27"><div class="t m0 x5 h26 y6f ff1 fs4 fc0 sc0 ls0 ws0">CODIGO: GF-FO-023</div></div><div class="c x31 y70 w1b h28"><div class="t m0 x5 h26 y71 ff1 fs4 fc0 sc0 ls0 ws0">VERSION: 04</div></div><div class="c x31 y6a w1b h27"><div class="t m0 x5 h26 y72 ff1 fs4 fc0 sc0 ls0 ws0">FECHA: 03/04/2025</div></div><div class="c x0 y73 w1c h29"><div class="t m1 x32 h2a y74 ff2 fs5 fc1 sc1 ls0 ws0">D i l i g e n c i e    o    s e l e c c i o n e    ú n i c a m e n t e     y     a     c o m p l e t i t u d     l o s     c a m p o s     e n     g r i s</div></div><div class="c x0 y75 w1d h2b"><div class="t m0 x5 h26 y76 ff1 fs4 fc2 sc2 ls0 ws0">Dependencia solicitante:</div></div><div class="c x28 y75 w1e h2b"><div class="t m0 x13 h26 y76 ff1 fs4 fc2 sc2 ls0 ws0">0072DP - DECANATURA PREGRADO</div></div><div class="c x33 y75 w1f h2b"><div class="t m0 x19 h26 y76 ff1 fs4 fc2 sc2 ls0 ws0">FECHA DE AUTOLIQUIDACIÓN</div></div><div class="c x31 y75 w1b h2b"><div class="t m0 xb h26 y76 ff1 fs4 fc2 sc2 ls0 ws0">5/3/2025</div></div><div class="c x0 y77 w1c h2c"><div class="t m0 x5 h26 y78 ff1 fs4 fc2 sc2 ls0 ws0">1. DATOS DEL COMISIONADO (SERVIDOR, DOCENTE DE PLANTA, DOCENTE OCASIONAL, DOCENTE ESPECIAL, DOCENTE VISITANTE) O ESTUDIANTE </div></div><div class="c x0 y79 w1d h2d"><div class="t m0 x5 h26 y7a ff1 fs4 fc2 sc2 ls0 ws0">Nombre completo</div></div><div class="c x28 y79 w20 h2d"><div class="t m0 x7 h26 y7a ff1 fs4 fc2 sc2 ls0 ws0">JUAN CARLOS QUINTERO CALVACHE</div></div><div class="c x34 y79 w21 h2d"><div class="t m0 xe h26 y7a ff1 fs4 fc2 sc2 ls0 ws0">Fecha de Nacimiento (dd/mm/aaaa)</div></div><div class="c xf y79 w22 h2d"><div class="t m0 x5 h26 y7b ff1 fs4 fc2 sc2 ls0 ws0">2 DE MARZO DE</div><div class="t m0 x5 h26 y7c ff1 fs4 fc2 sc2 ls0 ws0">1971</div></div><div class="c x0 y7d w1d h2d"><div class="t m0 x5 h26 y7e ff1 fs4 fc2 sc2 ls0 ws0">C.C. No.</div></div><div class="c x28 y7d w23 h2d"><div class="t m0 x35 h26 y7e ff1 fs4 fc2 sc2 ls0 ws0">16,791,253</div></div><div class="c x36 y7d w24 h2d"><div class="t m0 x5 h26 y7e ff1 fs4 fc2 sc2 ls0 ws0">Cargo / Rol ESAP</div></div><div class="c x33 y7d w25 h2d"><div class="t m0 x5 h2e y7e ff3 fs4 fc2 sc3 ls0 ws0">CARRERA</div></div><div class="c x0 y7f w1d h2d"><div class="t m0 x5 h26 y80 ff1 fs4 fc2 sc2 ls0 ws0">Teléfono de contacto y/o</div><div class="t m0 x5 h26 y81 ff1 fs4 fc2 sc2 ls0 ws0">Celular:</div></div><div class="c x28 y7f w23 h2d"><div class="t m0 x8 h26 y82 ff1 fs4 fc2 sc2 ls0 ws0">3103732839</div></div><div class="c x36 y7f w24 h2d"><div class="t m0 x5 h26 y80 ff1 fs4 fc2 sc2 ls0 ws0">Correo Electrónico</div><div class="t m0 x5 h26 y81 ff1 fs4 fc2 sc2 ls0 ws0">Institucional:</div></div><div class="c x33 y7f w25 h2d"><div class="t m0 x2a h2f y82 ff4 fs4 fc2 sc3 ls0 ws0">juan.quinteroc@esap.edu.co</div></div><div class="c x0 y83 w1d h30"><div class="t m0 x5 h26 y84 ff1 fs4 fc2 sc2 ls0 ws0">Entidad Bancaria</div></div><div class="c x28 y83 w1e h30"><div class="t m0 x32 h26 y84 ff1 fs4 fc2 sc2 ls0 ws0">BANCO DAVIVIENDA S.A.</div></div><div class="c x33 y83 w26 h30"><div class="t m0 x2d h26 y84 ff1 fs4 fc2 sc2 ls0 ws0">Tipo de Cuenta:</div></div><div class="c x34 y83 w27 h30"><div class="t m0 x6 h26 y84 ff1 fs4 fc2 sc2 ls0 ws0">AHORRO</div></div><div class="c x0 y85 w1d h31"><div class="t m0 x5 h26 y86 ff1 fs4 fc2 sc2 ls0 ws0">Asignación básica mensual:</div><div class="t m0 x5 h2e y87 ff3 fs4 fc2 sc3 ls0 ws0">(Nota: para estudiantes</div><div class="t m0 x5 h2e y88 ff3 fs4 fc2 sc3 ls0 ws0">registrar el salario mínimo)</div></div><div class="c x28 y85 w1e h31"><div class="t m0 x5 h26 y89 ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _5"> </span>12,502,106</div></div><div class="c x33 y85 w26 h31"><div class="t m0 x2f h26 y89 ff1 fs4 fc2 sc2 ls0 ws0">No. de Cuenta:</div></div><div class="c x34 y85 w27 h31"><div class="t m0 x37 h26 y89 ff1 fs4 fc2 sc2 ls0 ws0">016570281150</div></div><div class="c x0 y8a w1c h32"><div class="t m0 x5 h26 y8b ff1 fs4 fc2 sc2 ls0 ws0">2. DATOS DE LA COMISIÓN DE SERVICIOS O AUTORIZACIÓN DE DESPLAZAMIENTO</div></div><div class="c x0 y8c w1d h33"><div class="t m0 x0 h26 y8d ff1 fs4 fc2 sc2 ls0 ws0">Duración (en días):</div></div><div class="c x28 y8c w28 h33"><div class="t m0 x18 h26 y8d ff1 fs4 fc2 sc2 ls0 ws0">0.5</div></div><div class="c x2e y8e w29 h34"><div class="t m0 x18 h26 y8f ff1 fs4 fc2 sc2 ls0 ws0">Fecha de inicio</div></div><div class="c x36 y8e w24 h34"><div class="t m0 x1a h2e y8f ff3 fs4 fc2 sc3 ls0 ws0">5/9/2025</div></div><div class="c x33 y8e w26 h34"><div class="t m0 x18 h26 y90 ff1 fs4 fc2 sc2 ls0 ws0">Hora de vuelo ida:</div><div class="t m0 x23 h26 y91 ff1 fs4 fc2 sc2 ls0 ws0">(estimada)</div></div><div class="c x31 y8e w1b h34"><div class="t m0 x38 h26 y8f ff1 fs4 fc2 sc2 ls0 ws0">Itinerario (detallado):</div></div><div class="c x2e y8c w29 h35"><div class="t m0 x2d h26 y92 ff1 fs4 fc2 sc2 ls0 ws0">Fecha de finalización</div></div><div class="c x36 y8c w24 h35"><div class="t m0 x1a h2e y92 ff3 fs4 fc2 sc3 ls0 ws0">5/9/2025</div></div><div class="c x33 y8c w26 h35"><div class="t m0 x14 h26 y93 ff1 fs4 fc2 sc2 ls0 ws0">Hora de vuelo regreso:</div><div class="t m0 x23 h26 y94 ff1 fs4 fc2 sc2 ls0 ws0">(estimada)</div></div><div class="c x31 y8c w1b h35"><div class="t m0 x0 h36 y95 ff3 fs6 fc2 sc3 ls0 ws0">CALI-GUADALAJARA DE BUGA-CALI</div></div><div class="c x0 y96 w1d h37"><div class="t m0 x5 h26 y97 ff1 fs4 fc2 sc2 ls0 ws0">Objeto</div></div><div class="c x28 y96 w2a h37"><div class="t m0 x39 h2e y97 ff3 fs4 fc2 sc3 ls0 ws0">DICTAR ASIGNATURA DE REGIMEN DEL SERVIDOR PUBLICO EN EL CENTRO DE TUTORIA DE GUADALAJARA DE BUGA EL 09-05-2025</div></div><div class="c x0 y98 w1d h38"><div class="t m0 x5 h26 y99 ff1 fs4 fc2 sc2 ls0 ws0">Destino Comisión /</div><div class="t m0 x5 h26 y9a ff1 fs4 fc2 sc2 ls0 ws0">Autorización de</div><div class="t m0 x5 h26 y9b ff1 fs4 fc2 sc2 ls0 ws0">desplazamiento</div></div><div class="c x28 y98 w1e h38"><div class="t m0 x3a h26 y9c ff1 fs4 fc2 sc2 ls0 ws0">COLOMBIA</div></div><div class="c x33 y98 w1f h38"><div class="t m0 x3b h26 y9c ff1 fs4 fc2 sc2 ls0 ws0">Ciudad de origen</div></div><div class="c x31 y98 w1b h38"><div class="t m0 x24 h2e y9c ff3 fs4 fc2 sc3 ls0 ws0">CALI</div></div><div class="c x0 y9d w1d h39"><div class="t m0 x5 h3a y9e ff1 fs7 fc2 sc2 ls0 ws0">TRM del día de diligenciamiento de</div><div class="t m0 x5 h3a y9f ff1 fs7 fc2 sc2 ls0 ws0">este formato, sólo para comisiones</div><div class="t m0 x14 h3a ya0 ff1 fs7 fc2 sc2 ls0 ws0">de servicios en el exterior</div></div><div class="c x33 y9d w1f h39"><div class="t m0 x3c h26 ya1 ff1 fs4 fc2 sc2 ls0 ws0">Aeropuerto Destino</div></div><div class="c x31 y9d w1b h39"><div class="t m0 x3d h26 ya1 ff1 fs4 fc2 sc2 ls0 ws0">Terrestre</div></div><div class="c x0 ya2 w1c h2b"><div class="t m0 x5 h26 ya3 ff1 fs4 fc2 sc2 ls0 ws0">3. LIQUIDACIÓN DE LA COMISIÓN DE SERVICIOS O AUTORIZACIÓN DE DESPLAZAMIENTO</div></div><div class="c x0 ya4 w2b h3b"><div class="t m0 x26 h26 ya5 ff1 fs4 fc2 sc2 ls0 ws0">Descripción del día</div></div><div class="c x36 ya4 w24 h3b"><div class="t m0 x3e h26 ya5 ff1 fs4 fc2 sc2 ls0 ws0">No. de Días</div></div><div class="c x33 ya4 w1f h3b"><div class="t m0 x3f h26 ya5 ff1 fs4 fc2 sc2 ls0 ws0">Viáticos Diario</div></div><div class="c x31 ya4 w1b h3b"><div class="t m0 x24 h26 ya5 ff1 fs4 fc2 sc2 ls0 ws0">Total</div></div><div class="c x0 ya6 w2b h3c"><div class="t m0 x3a h2e ya7 ff3 fs4 fc2 sc3 ls0 ws0">Pernoctados</div></div><div class="c x36 ya6 w24 h3c"><div class="t m0 x3c h2e ya7 ff3 fs4 fc2 sc3 ls0 ws0">0</div></div><div class="c x33 ya6 w1f h3c"><div class="t m0 x5 h2e ya7 ff3 fs4 fc2 sc3 ls0 ws0">$ <span class="_ _6"> </span>622,374.00</div></div><div class="c x31 ya6 w1b h3c"><div class="t m0 x5 h2e ya7 ff3 fs4 fc2 sc3 ls0 ws0">$ <span class="_ _7"> </span>-</div></div><div class="c x0 ya8 w2b h3c"><div class="t m0 x25 h2e ya9 ff3 fs4 fc2 sc3 ls0 ws0">No Pernoctados</div></div><div class="c x36 ya8 w24 h3c"><div class="t m0 x3c h2e ya9 ff3 fs4 fc2 sc3 ls0 ws0">1</div></div><div class="c x33 ya8 w1f h3c"><div class="t m0 x5 h2e ya9 ff3 fs4 fc2 sc3 ls0 ws0">$ <span class="_ _6"> </span>311,187.00</div></div><div class="c x31 ya8 w1b h3c"><div class="t m0 x5 h2e ya9 ff3 fs4 fc2 sc3 ls0 ws0">$ <span class="_ _8"> </span>311,187.00</div></div><div class="c x0 yaa w2c h3c"><div class="t m0 x40 h26 yab ff1 fs4 fc2 sc2 ls0 ws0">Total Viáticos</div></div><div class="c x31 yaa w1b h3c"><div class="t m0 x5 h26 yab ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _8"> </span>311,187.00</div></div><div class="c x0 yac w1c h3b"><div class="t m0 x5 h26 yad ff1 fs4 fc2 sc2 ls0 ws0">4. LIQUIDACIÓN DE LOS GASTOS DE DESPLAZAMIENTO</div></div><div class="c x0 yae w2b h3c"><div class="t m0 x41 h26 yaf ff1 fs4 fc2 sc2 ls0 ws0">Descripción</div></div><div class="c x36 yae w2d h3c"><div class="t m0 x42 h26 yaf ff1 fs4 fc2 sc2 ls0 ws0">Total</div></div><div class="c x0 yb0 w2b h3b"><div class="t m0 x3b h26 yb1 ff1 fs4 fc2 sc2 ls0 ws0">Total Transporte y desplazamientos terminales aéreos</div></div><div class="c x36 yb0 w2d h3b"><div class="t m0 x5 h26 yb1 ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _9"> </span>-</div></div><div class="c x0 yb2 w2b h3c"><div class="t m0 x1c h26 yb3 ff1 fs4 fc2 sc2 ls0 ws0">Transporte y desplazamiento por vía terrestre, marítimo, fluvial y/o ferroviario</div></div><div class="c x36 yb2 w2d h3c"><div class="t m0 x5 h26 yb3 ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _a"> </span>29,600.00</div></div><div class="c x0 yb4 w2b h3c"><div class="t m0 x17 h26 yb5 ff1 fs4 fc2 sc2 ls0 ws0">TOTAL VIÁTICOS, TRANSPORTES Y DESPLAZAMIENTOS*</div></div><div class="c x36 yb4 w2d h3c"><div class="t m0 x5 h26 yb5 ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _b"> </span>340,787.00</div></div><div class="c x0 yb6 w1c h3c"><div class="t m0 x5 h26 yb7 ff1 fs4 fc2 sc2 ls0 ws0">*NOTA<span class="ff3 sc3">: Para la liquidación de gastos de transporte se aplicará lo referido en la Resolución de viáticos vigente.</span></div></div><div class="c x0 yb8 w1c h3d"><div class="t m0 x5 h26 yb9 ff1 fs4 fc2 sc2 ls0 ws0">5. INFORMACIÓN FINANCIERA DE LA COMISIÓN DE SERVICIOS O AUTORIZACIÓN DE DESPLAZAMIENTO</div></div><div class="c x0 yba w1c h3e"><div class="t m0 x5 h2e ybb ff3 fs4 fc2 sc3 ls0 ws0">El pago de la presente comisión de servicios / autorización de desplazamiento, se hará con cargo a 0072DP - DECANATURA PREGRADO, del Rubro C-0503-1000-16-20203K0503014-02, según</div><div class="t m0 x5 h2e ybc ff3 fs4 fc2 sc3 ls0 ws0">Certificado de Disponibilidad Presupuestal No. 4325 del 04/02/2025</div></div><div class="c x0 ybd w1d h3f"><div class="t m0 x5 h2e ybe ff3 fs4 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 h2e ybf ff3 fs4 fc2 sc3 ls0 ws0">________________________</div><div class="t m0 x5 h2e yc0 ff3 fs4 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 h2e yc1 ff3 fs4 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 h2e yc2 ff3 fs4 fc2 sc3 ls0 ws0">____</div><div class="t m0 x5 h2e yc3 ff3 fs4 fc2 sc3 ls0 ws0">Firma Jefe de Dependencia</div><div class="t m0 x5 h2e yc4 ff3 fs4 fc2 sc3 ls0 ws0">Firma Gerente de Proyecto</div></div><div class="c x28 yc5 w23 h40"><div class="t m0 x20 h2e yc6 ff3 fs4 fc2 sc3 ls0 ws0">Carmen Marlene Rojas Gallego</div></div><div class="c x34 yc5 w21 h40"><div class="t m0 x14 h2e yc6 ff3 fs4 fc2 sc3 ls0 ws0">Yeimi Viviana Agudo Rodriguez</div></div><div class="c x0 yc7 w2e h41"><div class="t m0 x43 h2e yc8 ff3 fs4 fc2 sc3 ls0 ws0">Coordinadora Académica</div></div><div class="c x33 yc7 w25 h41"><div class="t m0 x41 h2e yc8 ff3 fs4 fc2 sc3 ls0 ws0">Directora Territorial</div></div><div class="c x0 yc9 w2c h42"><div class="t m0 x5 h43 yca ff3 fs8 fc2 sc3 ls0 ws0">Elaboró: Carmen Marlene Rojas, Profesional Especializado</div></div><div class="c x31 ycb w1b h44"><div class="t m0 x0 h26 ycc ff1 fs4 fc2 sc2 ls0 ws0">La información recolectada en este</div><div class="t m0 xe h26 ycd ff1 fs4 fc2 sc2 ls0 ws0">documento es tratada bajo la política de</div><div class="t m0 x2d h26 yce ff1 fs4 fc2 sc2 ls0 ws0">Datos Personales de la ESAP en</div><div class="t m0 x14 h26 ycf ff1 fs4 fc2 sc2 ls0 ws0">cumplimiento a la Ley1581de2012</div></div><div class="c x0 yd0 w2c h45"><div class="t m0 x5 h43 yd1 ff3 fs8 fc2 sc3 ls0 ws0">Revisó: Carmen Marlene Rojas, Profesional Especializado</div></div><div class="c x0 ycb w2c h45"><div class="t m0 x5 h43 yd2 ff3 fs8 fc2 sc3 ls0 ws0">Aprobó: Yeimi Viviana Agudo, Directora Territorial</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
                <div id="pf3" class="pf w18 h23" data-page-no="3"><div class="pc pc3 w18 h23"><img class="bi x0 y0 w19 h24" alt="" src="assets/bg3.png"/><div class="c x2e y6a w1a h25"><div class="t m0 x2f h26 y6b ff1 fs4 fc0 sc0 ls0 ws0">FORMATO DE AUTORIZACIÓN SOLICITUD DE TRÁMITE Y LIQUIDACIÓN DE COMISIÓN DE</div><div class="t m0 x5 h26 y6c ff1 fs4 fc0 sc0 ls0 ws0">SERVICIOS, GASTOS DE TRANSPORTE, GASTOS DE DESPLAZAMIENTO Y AUXILIO ECONÓMICO DE</div><div class="t m0 x30 h26 y6d ff1 fs4 fc0 sc0 ls0 ws0">DESPLAZAMIENTO</div></div><div class="c x31 y6e w1b h27"><div class="t m0 x5 h26 y6f ff1 fs4 fc0 sc0 ls0 ws0">CODIGO: GF-FO-023</div></div><div class="c x31 y70 w1b h28"><div class="t m0 x5 h26 y71 ff1 fs4 fc0 sc0 ls0 ws0">VERSION: 04</div></div><div class="c x31 y6a w1b h27"><div class="t m0 x5 h26 y72 ff1 fs4 fc0 sc0 ls0 ws0">FECHA: 03/04/2025</div></div><div class="c x0 y73 w1c h29"><div class="t m1 x32 h2a y74 ff2 fs5 fc1 sc1 ls0 ws0">D i l i g e n c i e    o    s e l e c c i o n e    ú n i c a m e n t e     y     a     c o m p l e t i t u d     l o s     c a m p o s     e n     g r i s</div></div><div class="c x0 y75 w1d h2b"><div class="t m0 x5 h26 y76 ff1 fs4 fc2 sc2 ls0 ws0">Dependencia solicitante:</div></div><div class="c x28 y75 w1e h2b"><div class="t m0 x13 h26 y76 ff1 fs4 fc2 sc2 ls0 ws0">0072DP - DECANATURA PREGRADO</div></div><div class="c x33 y75 w1f h2b"><div class="t m0 x19 h26 y76 ff1 fs4 fc2 sc2 ls0 ws0">FECHA DE AUTOLIQUIDACIÓN</div></div><div class="c x31 y75 w1b h2b"><div class="t m0 x3d h26 y76 ff1 fs4 fc2 sc2 ls0 ws0">5/3/2025</div></div><div class="c x0 y77 w1c h2c"><div class="t m0 x5 h26 y78 ff1 fs4 fc2 sc2 ls0 ws0">1. DATOS DEL CONTRATISTA</div></div><div class="c x0 y79 w1d h2d"><div class="t m0 x5 h26 y7a ff1 fs4 fc2 sc2 ls0 ws0">Nombre completo</div></div><div class="c x28 y79 w20 h2d"><div class="t m0 x2c h26 y7a ff1 fs4 fc2 sc2 ls0 ws0">LINA MAYERLIN TABORDA OTERO</div></div><div class="c x34 y79 w21 h2d"><div class="t m0 xe h26 y7a ff1 fs4 fc2 sc2 ls0 ws0">Fecha de Nacimiento (dd/mm/aaaa)</div></div><div class="c xf y79 w22 h2d"><div class="t m0 x44 h26 y7a ff1 fs4 fc2 sc2 ls0 ws0">11/10/1996</div></div><div class="c x0 y7d w1d h2d"><div class="t m0 x5 h26 y7e ff1 fs4 fc2 sc2 ls0 ws0">C.C. No.</div></div><div class="c x28 y7d w23 h2d"><div class="t m0 x45 h26 y7e ff1 fs4 fc2 sc2 ls0 ws0">1,107,103,852</div></div><div class="c x36 y7d w24 h2d"><div class="t m0 x5 h26 y7e ff1 fs4 fc2 sc2 ls0 ws0">No. Contrato</div></div><div class="c x33 y7d w25 h2d"><div class="t m0 x5 h2e y7e ff3 fs4 fc2 sc3 ls0 ws0">VAC-002-2025</div></div><div class="c x0 y7f w1d h2d"><div class="t m0 x5 h26 y80 ff1 fs4 fc2 sc2 ls0 ws0">Teléfono de contacto y/o</div><div class="t m0 x5 h26 y81 ff1 fs4 fc2 sc2 ls0 ws0">Celular:</div></div><div class="c x28 y7f w23 h2d"><div class="t m0 x8 h26 y82 ff1 fs4 fc2 sc2 ls0 ws0">3175695808</div></div><div class="c x36 y7f w24 h2d"><div class="t m0 x5 h26 y80 ff1 fs4 fc2 sc2 ls0 ws0">Correo Electrónico</div><div class="t m0 x5 h26 y81 ff1 fs4 fc2 sc2 ls0 ws0">Institucional:</div></div><div class="c x33 y7f w25 h2d"><div class="t m0 x3 h2f y82 ff4 fs4 fc2 sc3 ls0 ws0">lina.taborda@esap.edu.co</div></div><div class="c x0 y83 w1d h30"><div class="t m0 x5 h26 y84 ff1 fs4 fc2 sc2 ls0 ws0">Entidad Bancaria</div></div><div class="c x28 y83 w1e h30"><div class="t m0 x26 h26 y84 ff1 fs4 fc2 sc2 ls0 ws0">BANCO BOGOTA</div></div><div class="c x33 y83 w26 h30"><div class="t m0 x2d h26 y84 ff1 fs4 fc2 sc2 ls0 ws0">Tipo de Cuenta:</div></div><div class="c x34 y83 w27 h30"><div class="t m0 x6 h26 y84 ff1 fs4 fc2 sc2 ls0 ws0">AHORRO</div></div><div class="c x0 y85 w1d h31"><div class="t m0 x5 h26 y89 ff1 fs4 fc2 sc2 ls0 ws0">Valor honorarios:</div></div><div class="c x28 y85 w1e h31"><div class="t m0 x5 h26 y89 ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _c"> </span>3,700,000</div></div><div class="c x33 y85 w26 h31"><div class="t m0 x2f h26 y89 ff1 fs4 fc2 sc2 ls0 ws0">No. de Cuenta:</div></div><div class="c x34 y85 w27 h31"><div class="t m0 x46 h26 y89 ff1 fs4 fc2 sc2 ls0 ws0">347090771</div></div><div class="c x0 y8a w1c h32"><div class="t m0 x5 h26 y8b ff1 fs4 fc2 sc2 ls0 ws0">2. DATOS AUTORIZACIÓN DE DESPLAZAMIENTO Y GASTOS DE DESPLAZAMIENTO</div></div><div class="c x0 y8c w1d h33"><div class="t m0 x0 h26 y8d ff1 fs4 fc2 sc2 ls0 ws0">Duración (en días):</div></div><div class="c x28 y8c w28 h33"><div class="t m0 x18 h26 y8d ff1 fs4 fc2 sc2 ls0 ws0">2.5</div></div><div class="c x2e y8e w29 h34"><div class="t m0 x18 h26 y8f ff1 fs4 fc2 sc2 ls0 ws0">Fecha de inicio</div></div><div class="c x36 y8e w24 h34"><div class="t m0 x1a h2e y8f ff3 fs4 fc2 sc3 ls0 ws0">5/9/2025</div></div><div class="c x33 y8e w26 h34"><div class="t m0 x18 h26 y90 ff1 fs4 fc2 sc2 ls0 ws0">Hora de vuelo ida:</div><div class="t m0 x23 h26 y91 ff1 fs4 fc2 sc2 ls0 ws0">(estimada)</div></div><div class="c x31 y8e w1b h34"><div class="t m0 x38 h26 y8f ff1 fs4 fc2 sc2 ls0 ws0">Itinerario (detallado):</div></div><div class="c x2e y8c w29 h35"><div class="t m0 x2d h26 y92 ff1 fs4 fc2 sc2 ls0 ws0">Fecha de finalización</div></div><div class="c x36 y8c w24 h35"><div class="t m0 x18 h2e y92 ff3 fs4 fc2 sc3 ls0 ws0">5/11/2025</div></div><div class="c x33 y8c w26 h35"><div class="t m0 x14 h26 y93 ff1 fs4 fc2 sc2 ls0 ws0">Hora de vuelo regreso:</div><div class="t m0 x23 h26 y94 ff1 fs4 fc2 sc2 ls0 ws0">(estimada)</div></div><div class="c x31 y8c w1b h35"><div class="t m0 x47 h36 y95 ff3 fs6 fc2 sc3 ls0 ws0">CALI-CARTAGO-SEVILLA-CALI</div></div><div class="c x0 y96 w1d h37"><div class="t m0 x5 h26 y97 ff1 fs4 fc2 sc2 ls0 ws0">Objeto</div></div><div class="c x28 y96 w2a h37"><div class="t m0 x1a h2e y97 ff3 fs4 fc2 sc3 ls0 ws0">DICTAR ASIGNATURA DE METODOLOGIA DE INVESTIGACION EN EL CENTRO DE TUTORIA DE CARTAGO-SEVILLA DEL 09-05-2025 AL 11-05-2025</div></div><div class="c x0 y98 w1d h38"><div class="t m0 x5 h26 yd3 ff1 fs4 fc2 sc2 ls0 ws0">Destino/ Autorización de</div><div class="t m0 x5 h26 yd4 ff1 fs4 fc2 sc2 ls0 ws0">desplazamiento</div></div><div class="c x28 y98 w1e h38"><div class="t m0 x3a h26 y9c ff1 fs4 fc2 sc2 ls0 ws0">COLOMBIA</div></div><div class="c x33 y98 w1f h38"><div class="t m0 x3b h26 y9c ff1 fs4 fc2 sc2 ls0 ws0">Ciudad de origen</div></div><div class="c x31 y98 w1b h38"><div class="t m0 x24 h2e y9c ff3 fs4 fc2 sc3 ls0 ws0">CALI</div></div><div class="c x0 y9d w1d h39"><div class="t m0 x5 h3a y9e ff1 fs7 fc2 sc2 ls0 ws0">TRM del día de diligenciamiento de</div><div class="t m0 x5 h3a y9f ff1 fs7 fc2 sc2 ls0 ws0">este formato, sólo para comisiones</div><div class="t m0 x14 h3a ya0 ff1 fs7 fc2 sc2 ls0 ws0">de servicios en el exterior</div></div><div class="c x33 y9d w1f h39"><div class="t m0 x3c h26 ya1 ff1 fs4 fc2 sc2 ls0 ws0">Aeropuerto Destino</div></div><div class="c x31 y9d w1b h39"><div class="t m0 x3d h26 ya1 ff1 fs4 fc2 sc2 ls0 ws0">Terrestre</div></div><div class="c x0 ya2 w1c h2b"><div class="t m0 x5 h26 ya3 ff1 fs4 fc2 sc2 ls0 ws0">3. LIQUIDACIÓN DE LA AUTORIZACIÓN DE DESPLAZAMIENTO</div></div><div class="c x0 ya4 w2b h3b"><div class="t m0 x26 h26 ya5 ff1 fs4 fc2 sc2 ls0 ws0">Descripción del día</div></div><div class="c x36 ya4 w24 h3b"><div class="t m0 x3e h26 ya5 ff1 fs4 fc2 sc2 ls0 ws0">No. de Días</div></div><div class="c x33 ya4 w1f h3b"><div class="t m0 x3f h26 ya5 ff1 fs4 fc2 sc2 ls0 ws0">Viáticos Diario</div></div><div class="c x31 ya4 w1b h3b"><div class="t m0 x24 h26 ya5 ff1 fs4 fc2 sc2 ls0 ws0">Total</div></div><div class="c x0 ya6 w2b h3c"><div class="t m0 x3a h2e ya7 ff3 fs4 fc2 sc3 ls0 ws0">Pernoctados</div></div><div class="c x36 ya6 w24 h3c"><div class="t m0 x3c h2e ya7 ff3 fs4 fc2 sc3 ls0 ws0">2</div></div><div class="c x33 ya6 w1f h3c"><div class="t m0 x5 h2e ya7 ff3 fs4 fc2 sc3 ls0 ws0">$ <span class="_ _6"> </span>234,445.00</div></div><div class="c x31 ya6 w1b h3c"><div class="t m0 x5 h2e ya7 ff3 fs4 fc2 sc3 ls0 ws0">$ <span class="_ _8"> </span>468,890.00</div></div><div class="c x0 ya8 w2b h3c"><div class="t m0 x25 h2e ya9 ff3 fs4 fc2 sc3 ls0 ws0">No Pernoctados</div></div><div class="c x36 ya8 w24 h3c"><div class="t m0 x3c h2e ya9 ff3 fs4 fc2 sc3 ls0 ws0">1</div></div><div class="c x33 ya8 w1f h3c"><div class="t m0 x5 h2e ya9 ff3 fs4 fc2 sc3 ls0 ws0">$ <span class="_ _6"> </span>117,223.00</div></div><div class="c x31 ya8 w1b h3c"><div class="t m0 x5 h2e ya9 ff3 fs4 fc2 sc3 ls0 ws0">$ <span class="_ _8"> </span>117,223.00</div></div><div class="c x0 yaa w2c h3c"><div class="t m0 x40 h26 yab ff1 fs4 fc2 sc2 ls0 ws0">Total Viáticos</div></div><div class="c x31 yaa w1b h3c"><div class="t m0 x5 h26 yab ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _8"> </span>586,113.00</div></div><div class="c x0 yac w1c h3b"><div class="t m0 x5 h26 yad ff1 fs4 fc2 sc2 ls0 ws0">4. LIQUIDACIÓN DE LOS GASTOS DE DESPLAZAMIENTO</div></div><div class="c x0 yae w2b h3c"><div class="t m0 x41 h26 yaf ff1 fs4 fc2 sc2 ls0 ws0">Descripción</div></div><div class="c x36 yae w2d h3c"><div class="t m0 x42 h26 yaf ff1 fs4 fc2 sc2 ls0 ws0">Total</div></div><div class="c x0 yb0 w2b h3b"><div class="t m0 x3b h26 yb1 ff1 fs4 fc2 sc2 ls0 ws0">Total Transporte y desplazamientos terminales aéreos</div></div><div class="c x36 yb0 w2d h3b"><div class="t m0 x5 h26 yb1 ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _9"> </span>-</div></div><div class="c x0 yb2 w2b h3c"><div class="t m0 x1c h26 yb3 ff1 fs4 fc2 sc2 ls0 ws0">Transporte y desplazamiento por vía terrestre, marítimo, fluvial y/o ferroviario</div></div><div class="c x36 yb2 w2d h3c"><div class="t m0 x5 h26 yb3 ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _b"> </span>130,000.00</div></div><div class="c x0 yb4 w2b h3c"><div class="t m0 x17 h26 yb5 ff1 fs4 fc2 sc2 ls0 ws0">TOTAL VIÁTICOS, TRANSPORTES Y DESPLAZAMIENTOS*</div></div><div class="c x36 yb4 w2d h3c"><div class="t m0 x5 h26 yb5 ff1 fs4 fc2 sc2 ls0 ws0">$ <span class="_ _b"> </span>716,113.00</div></div><div class="c x0 yb6 w1c h3c"><div class="t m0 x5 h26 yb7 ff1 fs4 fc2 sc2 ls0 ws0">*NOTA<span class="ff3 sc3">: Para la liquidación de gastos de transporte se aplicará lo referido en la Resolución de viáticos vigente.</span></div></div><div class="c x0 yb8 w1c h3d"><div class="t m0 x5 h26 yb9 ff1 fs4 fc2 sc2 ls0 ws0">5. INFORMACIÓN FINANCIERA DE LA COMISIÓN DE SERVICIOS O AUTORIZACIÓN DE DESPLAZAMIENTO</div></div><div class="c x0 yba w1c h3e"><div class="t m0 x5 h2e ybb ff3 fs4 fc2 sc3 ls0 ws0">El pago de la presente comisión de servicios / autorización de desplazamiento, se hará con cargo a 0072DP - DECANATURA PREGRADO, del Rubro 0, según Certificado de Disponibilidad Presupuestal</div><div class="t m0 x5 h2e ybc ff3 fs4 fc2 sc3 ls0 ws0">No. 4325 del 04/02/2025</div></div><div class="c x0 ybd w1d h3f"><div class="t m0 x5 h2e ybe ff3 fs4 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 h2e ybf ff3 fs4 fc2 sc3 ls0 ws0">________________________</div><div class="t m0 x5 h2e yc0 ff3 fs4 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 h2e yc1 ff3 fs4 fc2 sc3 ls0 ws0">_________________________</div><div class="t m0 x5 h2e yc2 ff3 fs4 fc2 sc3 ls0 ws0">____</div><div class="t m0 x5 h2e yc3 ff3 fs4 fc2 sc3 ls0 ws0">Firma Jefe de Dependencia</div><div class="t m0 x5 h2e yc4 ff3 fs4 fc2 sc3 ls0 ws0">Firma Gerente de Proyecto</div></div><div class="c x28 yc5 w23 h40"><div class="t m0 x20 h2e yc6 ff3 fs4 fc2 sc3 ls0 ws0">Carmen Marlene Rojas Gallego</div></div><div class="c x34 yc5 w21 h40"><div class="t m0 x14 h2e yc6 ff3 fs4 fc2 sc3 ls0 ws0">Yeimi Viviana Agudo Rodriguez</div></div><div class="c x0 yc7 w2e h41"><div class="t m0 x43 h2e yc8 ff3 fs4 fc2 sc3 ls0 ws0">Coordinadora Académica</div></div><div class="c x33 yc7 w25 h41"><div class="t m0 x41 h2e yc8 ff3 fs4 fc2 sc3 ls0 ws0">Directora Territorial</div></div><div class="c x0 yc9 w2c h42"><div class="t m0 x5 h43 yca ff3 fs8 fc2 sc3 ls0 ws0">Elaboró: Carmen Marlene Rojas, Profesional Especializado</div></div><div class="c x31 ycb w1b h44"><div class="t m0 x0 h26 ycc ff1 fs4 fc2 sc2 ls0 ws0">La información recolectada en este</div><div class="t m0 xe h26 ycd ff1 fs4 fc2 sc2 ls0 ws0">documento es tratada bajo la política de</div><div class="t m0 x2d h26 yce ff1 fs4 fc2 sc2 ls0 ws0">Datos Personales de la ESAP en</div><div class="t m0 x14 h26 ycf ff1 fs4 fc2 sc2 ls0 ws0">cumplimiento a la Ley1581de2012</div></div><div class="c x0 yd0 w2c h45"><div class="t m0 x5 h43 yd1 ff3 fs8 fc2 sc3 ls0 ws0">Revisó: Carmen Marlene Rojas, Profesional Especializado</div></div><div class="c x0 ycb w2c h45"><div class="t m0 x5 h43 yd2 ff3 fs8 fc2 sc3 ls0 ws0">Aprobó: Yeimi Viviana Agudo, Directora Territorial</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
                <div class="loading-indicator"></div>
            </div>
        </div>
        <!-- ---------------------------------- -->
        <!-- End Component: Visor PDF -->
        <!-- ---------------------------------- -->

        <!-- ---------------------------------- -->
        <!-- Component: Event Modal -->
        <!-- ---------------------------------- -->
        <div v-if="showModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 modal">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-md mx-4">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">
                            {{ currentEvent ? 'Editar Evento' : 'Nuevo Evento' }}
                        </h3>
                        <button @click="closeModal" class="text-gray-400 hover:text-gray-500">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div v-if="error" class="mb-4 p-2 bg-red-100 text-red-700 rounded-md">
                        {{ error }}
                    </div>
                    <form @submit.prevent="saveEvent">
                        <div class="space-y-4">
                            <div>
                                <label for="title" class="block text-sm font-medium text-gray-700">Título *</label>
                                <div class="custom-select">
                                    <input
                                        id="title"
                                        v-model="searchQuery"
                                        @focus="showOptions = true"
                                        @blur="hideOptions"
                                        @input="filterTerceros"
                                        placeholder="Selecciona un tercero..."
                                        class="mt-1 block w-full"
                                    >
                                    <div v-if="showOptions && filteredTerceros.length" class="options">
                                        <div
                                            v-for="tercero in filteredTerceros"
                                            :key="tercero.id"
                                            class="option"
                                            @mousedown="selectTercero(tercero)"
                                        >
                                            {{ tercero.nombreTercero }}
                                        </div>
                                    </div>
                                    <div v-else-if="showOptions" class="options">
                                        <div class="option">No se encontraron resultados</div>
                                    </div>
                                </div>
                                <input type="hidden" v-model="form.terceroId" name="terceroId" />
                            </div>
                            <div>
                                <label for="description" class="block text-sm font-medium text-gray-700">Descripción</label>
                                <textarea id="description" v-model="form.description" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>
                            </div>
                            <div>
                                <label for="dateRange" class="block text-sm font-medium text-gray-700">Rango de Fechas *</label>
                                <input type="text" id="dateRange" ref="dateRangePicker" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            </div>
                            <div>
                                <label for="color" class="block text-sm font-medium text-gray-700">Color</label>
                                <select id="color" v-model="form.color" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                    <option value="#3b82f6">Azul</option>
                                    <option value="#10b981">Verde</option>
                                    <option value="#8b5cf6">Morado</option>
                                    <option value="#f59e0b">Amarillo</option>
                                    <option value="#ef4444">Rojo</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-6 flex justify-end space-x-3">
                            <button v-if="currentEvent" type="button" @click="deleteEvent" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                Eliminar
                            </button>
                            <button type="button" @click="closeModal" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                Cancelar
                            </button>
                            <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                Guardar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- ---------------------------------- -->
        <!-- End Component: Event Modal -->
        <!-- ---------------------------------- -->

        <!-- ---------------------------------- -->
        <!-- Component: Programming Modal -->
        <!-- ---------------------------------- -->
        <div v-if="showProgrammingModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 modal">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-lg mx-4">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Programación</h3>
                        <button @click="closeProgrammingModal" class="text-gray-400 hover:text-gray-500">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label for="programmingDateRange" class="block text-sm font-medium text-gray-700">Seleccionar Rango de Fechas</label>
                            <input type="text" id="programmingDateRange" ref="programmingDateRangePicker" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        </div>
                        <div v-if="programmingEventsJson" class="mt-4">
                            <label class="block text-sm font-medium text-gray-700">Total eventos: {{ programmingEventsJson ? JSON.parse(programmingEventsJson).length : 0 }}</label>
                            <pre class="bg-gray-100 p-4 rounded-md overflow-auto max-h-60">{{ programmingEventsJson }}</pre>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-end space-x-3">
                        <button type="button" @click="closeProgrammingModal" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            Cerrar
                        </button>
                        <button type="button" @click="generateProgrammingJson" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            Aceptar
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- ---------------------------------- -->
        <!-- End Component: Programming Modal -->
        <!-- ---------------------------------- -->

        <!-- ---------------------------------- -->
        <!-- Component: Terceros Modal -->
        <!-- ---------------------------------- -->
        <div v-if="showTercerosModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 modal">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Terceros</h3>
                        <button @click="closeTercerosModal" class="text-gray-400 hover:text-gray-500">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div v-if="!showTerceroForm">
                        <button @click="openTerceroForm" class="mb-4 px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700">Nuevo Tercero</button>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white border">
                                <thead>
                                    <tr>
                                        <th class="py-2 px-4 border-b">Nombre</th>
                                        <th class="py-2 px-4 border-b">Documento</th>
                                        <th class="py-2 px-4 border-b">Tipo</th>
                                        <th class="py-2 px-4 border-b">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="tercero in terceros" :key="tercero.id" class="hover:bg-gray-100">
                                        <td class="py-2 px-4 border-b">{{ tercero.nombreTercero }}</td>
                                        <td class="py-2 px-4 border-b">{{ tercero.numeroDocumentoTercero }}</td>
                                        <td class="py-2 px-4 border-b">{{ tercero.props.tipoTercero }}</td>
                                        <td class="py-2 px-4 border-b">
                                            <button @click="editTercero(tercero)" class="text-blue-600 hover:text-blue-800 mr-2">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button @click="deleteTercero(tercero.id)" class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div v-if="showTerceroForm" class="mt-6">
                        <h4 class="text-md font-semibold text-gray-900 mb-2">{{ currentTercero ? 'Editar Tercero' : 'Nuevo Tercero' }}</h4>
                        <form @submit.prevent="saveTercero">
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <div>
                                    <label for="ccTercero" class="block text-sm font-medium text-gray-700">CC Tercero</label>
                                    <input type="text" id="ccTercero" v-model="terceroForm.ccTercero" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="nombreTercero" class="block text-sm font-medium text-gray-700">Nombre</label>
                                    <input type="text" id="nombreTercero" v-model="terceroForm.nombreTercero" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="inicialTercero" class="block text-sm font-medium text-gray-700">Inicial</label>
                                    <input type="text" id="inicialTercero" v-model="terceroForm.inicialTercero" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="tipoDocumentoTercero" class="block text-sm font-medium text-gray-700">Tipo Documento</label>
                                    <select id="tipoDocumentoTercero" v-model="terceroForm.tipoDocumentoTercero" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                        <option value="03">03</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="numeroDocumentoTercero" class="block text-sm font-medium text-gray-700">Número Documento</label>
                                    <input type="text" id="numeroDocumentoTercero" v-model="terceroForm.numeroDocumentoTercero" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="tipoTercero" class="block text-sm font-medium text-gray-700">Tipo Tercero</label>
                                    <select id="tipoTercero" v-model="terceroForm.props.tipoTercero" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                        <option value="CONTRATISTA">CONTRATISTA</option>
                                        <option value="CATEDRATICO">CATEDRÁTICO</option>
                                        <option value="SERVIDOR">SERVIDOR</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="baseLiquidacion" class="block text-sm font-medium text-gray-700">Base Liquidación</label>
                                    <input type="text" id="baseLiquidacion" v-model="terceroForm.props.baseLiquidacion" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="cargoServidor" class="block text-sm font-medium text-gray-700">Cargo</label>
                                    <select id="cargoServidor" v-model="terceroForm.props.cargoServidor" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                        <option value="Servidor">Servidor</option>
                                        <option value="Contratista">Contratista</option>
                                        <option value="Carrera">Carrera</option>
                                        <option value="Ocasional">Ocasional</option>
                                        <option value="Hora Catedra">Hora Cátedra</option>
                                        <option value="Docente Capacitador I">Docente Capacitador I</option>
                                        <option value="Docente Capacitador II">Docente Capacitador II</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="entidadBancaria" class="block text-sm font-medium text-gray-700">Entidad Bancaria</label>
                                    <select id="entidadBancaria" v-model="terceroForm.props.entidadBancaria" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                        <option value="ALIENZA FIDUCIARIA">ALIENZA FIDUCIARIA</option>
                                        <option value="BAN100">BAN100</option>
                                        <!-- Other options omitted for brevity -->
                                    </select>
                                </div>
                                <div>
                                    <label for="cuentaBancaria" class="block text-sm font-medium text-gray-700">Cuenta Bancaria</label>
                                    <input type="text" id="cuentaBancaria" v-model="terceroForm.props.cuentaBancaria" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="tipoCuenta" class="block text-sm font-medium text-gray-700">Tipo Cuenta</label>
                                    <select id="tipoCuenta" v-model="terceroForm.props.tipoCuenta" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                        <option value="Ahorro">Ahorro</option>
                                        <option value="Corriente">Corriente</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="telefono" class="block text-sm font-medium text-gray-700">Teléfono</label>
                                    <input type="text" id="telefono" v-model="terceroForm.props.telefono" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="correo" class="block text-sm font-medium text-gray-700">Correo</label>
                                    <input type="email" id="correo" v-model="terceroForm.props.correo" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="fechaNacimiento" class="block text-sm font-medium text-gray-700">Fecha Nacimiento</label>
                                    <input type="date" id="fechaNacimiento" v-model="terceroForm.props.fechaNacimiento" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                                <div>
                                    <label for="contrato" class="block text-sm font-medium text-gray-700">Contrato</label>
                                    <input type="text" id="contrato" v-model="terceroForm.props.contrato" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button type="button" @click="closeTerceroForm" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Cancelar
                                </button>
                                <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Guardar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- ---------------------------------- -->
        <!-- End Component: Terceros Modal -->
        <!-- ---------------------------------- -->

        <!-- ---------------------------------- -->
        <!-- Component: Periodo Modal -->
        <!-- ---------------------------------- -->
        <div v-if="showPeriodoModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 modal">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[80vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">
                            {{ showPeriodoForm ? (currentPeriodo ? 'Editar Periodo' : 'Nuevo Periodo') : 'Gestionar Periodos' }}
                        </h3>
                        <button @click="closePeriodoModal" class="text-gray-400 hover:text-gray-500">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div v-if="!showPeriodoForm">
                        <div class="flex items-center space-x-2 mb-4">
                            <button @click="openPeriodoForm" class="px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                                Nuevo Periodo
                            </button>
                            <button @click="showCronogramaTimeline" :disabled="!selectedPeriodos.length" :class="{'bg-gray-400 cursor-not-allowed': !selectedPeriodos.length, 'bg-blue-600 hover:bg-blue-700': selectedPeriodos.length}" class="px-3 py-1 text-white rounded-md flex items-center">
                                <i class="fas fa-list-alt mr-2"></i>
                                Cronograma
                            </button>
                            <select v-model="periodoFilter" @change="applyFilters" class="border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                <option value="">Todos los Periodos</option>
                                <option v-for="periodo in uniquePeriodos" :key="periodo" :value="periodo">{{ periodo }}</option>
                            </select>
                            <input type="text" v-model="centroFilter" @input="applyFilters" placeholder="Filtrar Centro..." class="border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                        </div>
                        <div v-if="filteredPeriodos.length" class="overflow-x-auto">
                            <table class="min-w-full bg-white border">
                                <thead>
                                    <tr>
                                        <th class="py-2 px-4 border-b"></th>
                                        <th class="py-2 px-4 border-b">Periodo</th>
                                        <th class="py-2 px-4 border-b">Centro</th>
                                        <th class="py-2 px-4 border-b">Programa</th>
                                        <th class="py-2 px-4 border-b">Semestres</th>
                                        <th class="py-2 px-4 border-b">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="periodo in filteredPeriodos" :key="periodo.id" class="hover:bg-gray-100">
                                        <td class="py-2 px-4 border-b">
                                            <input type="checkbox" v-model="selectedPeriodos" :value="periodo.id" class="mr-2">
                                        </td>
                                        <td class="py-2 px-4 border-b">{{ periodo.periodo }}</td>
                                        <td class="py-2 px-4 border-b">{{ periodo.centro }}</td>
                                        <td class="py-2 px-4 border-b">{{ periodo.programa }}</td>
                                        <td class="py-2 px-4 border-b">
                                            {{ periodo.semestres.map((s, i) => s ? i + 1 : null).filter(Boolean).join(', ') || 'Ninguno' }}
                                        </td>
                                        <td class="py-2 px-4 border-b">
                                            <button @click="editPeriodo(periodo)" class="text-blue-600 hover:text-blue-800 mr-2">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button @click="deletePeriodo(periodo.id)" class="text-red-600 hover:text-red-800">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div v-else class="text-gray-600 text-center py-4">
                            No hay periodos registrados.
                        </div>
                    </div>
                    <div v-if="showPeriodoForm">
                        <form @submit.prevent="savePeriodo">
                            <div class="space-y-4">
                                <div class="grid grid-cols-5 gap-4">
                                    <div>
                                        <label for="periodo" class="block text-sm font-medium text-gray-700">Periodo</label>
                                        <select id="periodo" v-model="periodoForm.periodo" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                            <option value="2025-1">2025-1</option>
                                            <option value="2025-2">2025-2</option>
                                            <option value="2026-1">2026-1</option>
                                            <option value="2026-2">2026-2</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label for="centro" class="block text-sm font-medium text-gray-700">Centro</label>
                                        <select id="centro" v-model="periodoForm.centro" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                            <option value="CALI">CALI</option>
                                            <option value="TULUA">TULUA</option>
                                            <option value="SEVILLA">SEVILLA</option>
                                        </select>
                                    </div>
                                    <div class="col-span-3">
                                        <label for="programa" class="block text-sm font-medium text-gray-700">Programa</label>
                                        <select id="programa" v-model="periodoForm.programa" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                            <option value="ADMINISTRACION PUBLICA">ADMINISTRACION PUBLICA</option>
                                            <option value="INGENIERIA DE SOFTWARE">INGENIERIA DE SOFTWARE</option>
                                            <option value="MEDICINA">MEDICINA</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">
                                        Semestres
                                        <button @click.prevent="toggleAllSemesters" class="text-blue-600 hover:text-blue-800 ml-1">
                                            ({{ periodoForm.semestres.every(s => s) ? 'Ninguno' : 'Todos' }})
                                        </button>
                                    </label>
                                    <div class="grid grid-cols-5 gap-2">
                                        <label v-for="n in 10" :key="'semestre-' + n" class="flex items-center">
                                            <input type="checkbox" v-model="periodoForm.semestres[n-1]" class="mr-2">
                                            Semestre {{ n }}
                                        </label>
                                    </div>
                                </div>
                                <div v-if="periodoForm.semestres.some(s => s)">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Asignaturas</label>
                                    <div v-for="semestre in getSelectedSemesters" :key="'asignatura-' + semestre" class="mb-4">
                                        <h4 class="text-md font-medium text-gray-700">Semestre {{ semestre }}</h4>
                                        <div class="grid grid-cols-5 gap-2 mt-2">
                                            <div v-for="asignatura in getAsignaturasForSemester(semestre)" :key="'asignatura-' + asignatura" class="flex flex-col">
                                                <label class="text-sm font-medium text-gray-700">{{ asignatura }}</label>
                                                <select v-model="periodoForm.asignaturas[semestre][asignatura]" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm">
                                                    <option value="">Selecciona un tercero</option>
                                                    <option v-for="tercero in terceros" :key="tercero.id" :value="tercero.id">
                                                        {{ tercero.nombreTercero }}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button type="button" @click="closePeriodoForm" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Cancelar
                                </button>
                                <button type="submit" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Guardar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- ---------------------------------- -->
        <!-- End Component: Periodo Modal -->
        <!-- ---------------------------------- -->
    </div>
  
    <!-- JavaScript and Vue app initialization -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.global.min.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales/es.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
    <script src="https://visjs.github.io/vis-timeline/standalone/umd/vis-timeline-graph2d.min.js"></script>
    <!-- PDF Viewer Scripts -->
    <script src="assets/compatibility.min.js"></script>
    <script src="assets/Viewer.min.js"></script>
    <!-- Include jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>


<script>
// ----------------------------------
// Component: Vue Setup and Imports
// ----------------------------------
const { createApp, ref, onMounted, onUnmounted, nextTick, computed, reactive } = Vue;

// Mock data for terceros
const mockTerceros = [
    { id: '1', ccTercero: 'CC001', nombreTercero: 'Juan Pérez', inicialTercero: 'JP', tipoDocumentoTercero: '03', numeroDocumentoTercero: '12345678', props: { tipoTercero: 'CONTRATISTA', baseLiquidacion: '5000000', cargoServidor: 'Contratista', entidadBancaria: 'BANCOLOMBIA', cuentaBancaria: '1234567890', tipoCuenta: 'Ahorro', telefono: '3001234567', correo: 'juan.perez@example.com', fechaNacimiento: '1980-05-15', contrato: 'C001' } },
    { id: '2', ccTercero: 'CC002', nombreTercero: 'María Gómez', inicialTercero: 'MG', tipoDocumentoTercero: '03', numeroDocumentoTercero: '87654321', props: { tipoTercero: 'CATEDRATICO', baseLiquidacion: '3000000', cargoServidor: 'Hora Catedra', entidadBancaria: 'BANCO DAVIVIENDA', cuentaBancaria: '0987654321', tipoCuenta: 'Corriente', telefono: '3109876543', correo: 'maria.gomez@example.com', fechaNacimiento: '1990-08-22', contrato: 'C002' } },
    { id: '3', ccTercero: 'CC003', nombreTercero: 'Carlos López', inicialTercero: 'CL', tipoDocumentoTercero: '03', numeroDocumentoTercero: '11223344', props: { tipoTercero: 'SERVIDOR', baseLiquidacion: '4000000', cargoServidor: 'Servidor', entidadBancaria: 'BANCO DE BOGOTA', cuentaBancaria: '4567891234', tipoCuenta: 'Ahorro', telefono: '3204567890', correo: 'carlos.lopez@example.com', fechaNacimiento: '1975-03-10', contrato: 'C003' } }
];

// Mock data source simulation
const TerceroDataSource = async () => {
    return new Promise((resolve) => {
        setTimeout(() => resolve([...mockTerceros]), 500);
    });
};
// ----------------------------------
// End Component: Vue Setup and Imports
// ----------------------------------

// ----------------------------------
// Component: Main App
// ----------------------------------
const app = createApp({
    setup() {
        // State management
        const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
        const currentView = ref('dayGridMonth');
        const calendarApi = ref(null);
        const events = ref(JSON.parse(localStorage.getItem('academicEvents')) || []);
        const showModal = ref(false);
        const currentEvent = ref(null);
        const error = ref(null);
        const dateRangePicker = ref(null);
        const limitEvents = ref(true);
        const form = ref({
            title: '',
            description: '',
            startDate: '',
            endDate: '',
            color: '#3b82f6',
            terceroId: ''
        });
        const showProgrammingModal = ref(false);
        const programmingDateRangePicker = ref(null);
        const programmingRange = ref({ start: '', end: '' });
        const programmingEventsJson = ref(null);
        const showTercerosModal = ref(false);
        const terceros = ref([]);
        const searchQuery = ref('');
        const showOptions = ref(false);
        const currentTercero = ref(null);
        const showTerceroForm = ref(false);
        const terceroForm = ref({
            id: '',
            ccTercero: '',
            nombreTercero: '',
            inicialTercero: '',
            tipoDocumentoTercero: '03',
            numeroDocumentoTercero: '',
            props: {
                tipoTercero: 'CONTRATISTA',
                baseLiquidacion: '',
                cargoServidor: 'Servidor',
                entidadBancaria: 'BANCOLOMBIA',
                cuentaBancaria: '',
                tipoCuenta: 'Ahorro',
                telefono: '',
                correo: '',
                fechaNacimiento: '',
                contrato: ''
            }
        });
        let flatpickrInstance = null;
        let programmingFlatpickrInstance = null;
        const showPeriodoModal = ref(false);
        const periodos = ref(JSON.parse(localStorage.getItem('periodos')) || []);
        const currentPeriodo = ref(null);
        const periodoForm = ref({
            periodo: '2025-1',
            centro: 'CALI',
            programa: 'ADMINISTRACION PUBLICA',
            semestres: Array(10).fill(false),
            asignaturas: {}
        });
        const showTimeline = ref(false);
        const timelineContainer = ref(null);
        let timeline = null;
        const timelineModalState = reactive({
            isOpen: false,
            action: 'add',
            eventData: { id: '', content: '', group: '', start: '', end: '' }
        });

        // ----------------------------------
        // Component: Terceros Management
        // ----------------------------------
        const loadTerceros = async () => {
            terceros.value = await TerceroDataSource();
        };

        const filteredTerceros = computed(() => {
            if (!searchQuery.value) return terceros.value;
            return terceros.value.filter(tercero => 
                tercero.nombreTercero.toLowerCase().includes(searchQuery.value.toLowerCase())
            );
        });

        const filterTerceros = () => {
            showOptions.value = true;
        };

        const selectTercero = (tercero) => {
            form.value.terceroId = tercero.id;
            form.value.title = tercero.nombreTercero;
            searchQuery.value = tercero.nombreTercero;
            showOptions.value = false;
        };

        const hideOptions = () => {
            setTimeout(() => {
                showOptions.value = false;
            }, 200);
        };

        const openTercerosModal = async () => {
            if (showTimeline.value) return;
            showTercerosModal.value = true;
            showTerceroForm.value = false;
            await loadTerceros();
        };

        const closeTercerosModal = () => {
            showTercerosModal.value = false;
            showTerceroForm.value = false;
            currentTercero.value = null;
        };

        const openTerceroForm = () => {
            showTerceroForm.value = true;
            currentTercero.value = null;
            terceroForm.value = {
                id: '',
                ccTercero: '',
                nombreTercero: '',
                inicialTercero: '',
                tipoDocumentoTercero: '03',
                numeroDocumentoTercero: '',
                props: {
                    tipoTercero: 'CONTRATISTA',
                    baseLiquidacion: '',
                    cargoServidor: 'Servidor',
                    entidadBancaria: 'BANCOLOMBIA',
                    cuentaBancaria: '',
                    tipoCuenta: 'Ahorro',
                    telefono: '',
                    correo: '',
                    fechaNacimiento: '',
                    contrato: ''
                }
            };
        };

        const closeTerceroForm = () => {
            showTerceroForm.value = false;
            currentTercero.value = null;
        };

        const editTercero = (tercero) => {
            currentTercero.value = tercero;
            terceroForm.value = JSON.parse(JSON.stringify(tercero));
            showTerceroForm.value = true;
        };

        const saveTercero = () => {
            if (!terceroForm.value.nombreTercero || !terceroForm.value.numeroDocumentoTercero) {
                alert('El nombre y el número de documento son requeridos.');
                return;
            }
            if (currentTercero.value) {
                const index = terceros.value.findIndex(t => t.id === currentTercero.value.id);
                if (index !== -1) terceros.value[index] = { ...terceroForm.value };
            } else {
                const newTercero = { ...terceroForm.value, id: Date.now().toString() };
                terceros.value.push(newTercero);
            }
            closeTerceroForm();
        };

        const deleteTercero = (id) => {
            if (confirm('¿Estás seguro de eliminar este tercero?')) {
                terceros.value = terceros.value.filter(t => t.id !== id);
            }
        };
        // ----------------------------------
        // End Component: Terceros Management
        // ----------------------------------

        // ----------------------------------
        // Component: Calendar Management
        // ----------------------------------
        const getTitle = () => {
            if (!calendarApi.value) return '';
            const view = calendarApi.value.view;
            if (view.type === 'dayGridMonth') {
                const date = view.currentStart;
                return `${monthNames[date.getMonth()]} ${date.getFullYear()}`;
            } else if (view.type === 'dayGridWeek') {
                const start = view.currentStart;
                const end = view.currentEnd;
                end.setDate(end.getDate() - 1);
                if (start.getMonth() === end.getMonth()) {
                    return `${start.getDate()} - ${end.getDate()} ${monthNames[start.getMonth()]} ${start.getFullYear()}`;
                } else if (start.getFullYear() === end.getFullYear()) {
                    return `${start.getDate()} ${monthNames[start.getMonth()].substring(0, 3)} - ${end.getDate()} ${monthNames[end.getMonth()].substring(0, 3)} ${start.getFullYear()}`;
                } else {
                    return `${start.getDate()} ${monthNames[start.getMonth()].substring(0, 3)} ${start.getFullYear()} - ${end.getDate()} ${monthNames[end.getMonth()].substring(0, 3)} ${end.getFullYear()}`;
                }
            }
            return '';
        };

        const darkenColor = (color, percent) => {
            if (!color) return '#3b82f6';
            if (color.startsWith('#')) {
                const num = parseInt(color.replace("#", ""), 16);
                const amt = Math.round(2.55 * percent);
                const R = Math.max(0, (num >> 16) - amt);
                const G = Math.max(0, (num >> 8 & 0x00FF) - amt);
                const B = Math.max(0, (num & 0x0000FF) - amt);
                return `#${(0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1)}`;
            }
            return '#2563eb';
        };

        const navigate = (direction) => {
            if (!calendarApi.value || showTimeline.value) return;
            if (direction === 'prev') calendarApi.value.prev();
            else if (direction === 'next') calendarApi.value.next();
            updateTitle();
        };

        const setView = (view) => {
            if (!calendarApi.value || showTimeline.value) return;
            currentView.value = view;
            calendarApi.value.changeView(view);
            if (view === 'dayGridMonth') {
                calendarApi.value.setOption('dayMaxEventRows', limitEvents.value ? 4 : false);
                calendarApi.value.setOption('dayMaxEvents', limitEvents.value ? 4 : false);
            } else if (view === 'dayGridWeek') {
                calendarApi.value.setOption('dayMaxEventRows', false);
                calendarApi.value.setOption('dayMaxEvents', false);
            }
            updateTitle();
        };

        const goToToday = () => {
            if (!calendarApi.value || showTimeline.value) return;
            calendarApi.value.today();
            setView(currentView.value);
            updateTitle();
        };

        const toggleEventLimit = () => {
            if (currentView.value !== 'dayGridMonth' || showTimeline.value) return;
            limitEvents.value = !limitEvents.value;
            if (calendarApi.value) {
                calendarApi.value.setOption('dayMaxEventRows', limitEvents.value ? 4 : false);
                calendarApi.value.setOption('dayMaxEvents', limitEvents.value ? 4 : false);
            }
        };

        const updateTitle = () => {
            const titleElement = document.getElementById('calendar-title');
            if (titleElement) titleElement.textContent = getTitle();
        };

        const renderEvents = () => {
            if (!calendarApi.value || showTimeline.value) return;
            calendarApi.value.getEvents().forEach(event => event.remove());
            events.value.forEach(event => {
                calendarApi.value.addEvent({
                    id: event.id,
                    title: event.title,
                    start: event.startDate,
                    end: event.endDate,
                    allDay: true,
                    backgroundColor: event.color || '#3b82f6',
                    borderColor: darkenColor(event.color, 20),
                    extendedProps: { 
                        description: event.description || '',
                        terceroId: event.terceroId || ''
                    }
                });
            });
        };
        // ----------------------------------
        // End Component: Calendar Management
        // ----------------------------------

        // ----------------------------------
        // Component: Event Management
        // ----------------------------------
        const openModal = (date) => {
            if (showTimeline.value) return;
            if (date) {
                form.value.startDate = date;
                form.value.endDate = date;
            } else if (!currentEvent.value) {
                const today = new Date().toISOString().split('T')[0];
                form.value.startDate = today;
                form.value.endDate = today;
            }
            showModal.value = true;

            nextTick(() => {
                if (dateRangePicker.value) {
                    flatpickrInstance = flatpickr(dateRangePicker.value, {
                        mode: 'range',
                        dateFormat: 'Y-m-d',
                        locale: 'es',
                        defaultDate: [form.value.startDate, form.value.endDate],
                        onChange: (selectedDates) => {
                            if (selectedDates.length === 2) {
                                form.value.startDate = selectedDates[0].toISOString().split('T')[0];
                                form.value.endDate = selectedDates[1].toISOString().split('T')[0];
                            }
                        },
                        onReady: (selectedDates, dateStr, instance) => {
                            if ((date && form.value.startDate === form.value.endDate) || currentEvent.value) {
                                dateRangePicker.value.value = `${form.value.startDate} a ${form.value.endDate}`;
                            }
                        },
                        onOpen: (selectedDates, dateStr, instance) => {
                            if ((date && form.value.startDate === form.value.endDate) || currentEvent.value) {
                                dateRangePicker.value.value = `${form.value.startDate} a ${form.value.endDate}`;
                            }
                        }
                    });

                    if ((date && form.value.startDate === form.value.endDate) || currentEvent.value) {
                        dateRangePicker.value.value = `${form.value.startDate} a ${form.value.endDate}`;
                    }
                }
            });
        };

        const closeModal = () => {
            showModal.value = false;
            currentEvent.value = null;
            error.value = null;
            form.value = {
                title: '',
                description: '',
                startDate: '',
                endDate: '',
                color: '#3b82f6',
                terceroId: ''
            };
            searchQuery.value = '';
            showOptions.value = false;
            if (flatpickrInstance) {
                flatpickrInstance.destroy();
                flatpickrInstance = null;
            }
        };

        const editEvent = (eventInfo) => {
            if (showTimeline.value) return;
            const endDate = new Date(eventInfo.event.end || eventInfo.event.start);
            endDate.setDate(endDate.getDate() - 1);
            
            currentEvent.value = {
                id: eventInfo.event.id,
                title: eventInfo.event.title,
                description: eventInfo.event.extendedProps.description || '',
                startDate: eventInfo.event.startStr.split('T')[0],
                endDate: endDate.toISOString().split('T')[0],
                color: eventInfo.event.backgroundColor || '#3b82f6',
                terceroId: eventInfo.event.extendedProps.terceroId || ''
            };

            form.value = { ...currentEvent.value };
            searchQuery.value = form.value.title;
            openModal();
        };

        const saveEvent = () => {
            if (!form.value.title) {
                error.value = 'El título es requerido';
                return;
            }
            if (!form.value.startDate || !form.value.endDate) {
                error.value = 'Las fechas son requeridas';
                return;
            }
            const startDate = new Date(form.value.startDate);
            const endDate = new Date(form.value.endDate);
            if (startDate > endDate) {
                error.value = 'La fecha de inicio no puede ser posterior a la fecha final';
                return;
            }
            error.value = null;
            const startDateStr = `${form.value.startDate}T00:00:00`;
            const adjustedEndDate = new Date(form.value.endDate);
            adjustedEndDate.setDate(adjustedEndDate.getDate() + 1);
            const endDateStr = adjustedEndDate.toISOString().split('T')[0] + 'T00:00:00';

            const eventData = {
                id: currentEvent.value ? currentEvent.value.id : Date.now().toString(),
                title: form.value.title,
                description: form.value.description,
                startDate: startDateStr,
                endDate: endDateStr,
                color: form.value.color,
                terceroId: form.value.terceroId
            };

            if (currentEvent.value) {
                const index = events.value.findIndex(e => e.id === currentEvent.value.id);
                if (index !== -1) events.value[index] = eventData;
            } else {
                events.value.push(eventData);
            }
            localStorage.setItem('academicEvents', JSON.stringify(events.value));
            renderEvents();
            closeModal();
        };

        const deleteEvent = () => {
            if (currentEvent.value) {
                events.value = events.value.filter(e => e.id !== currentEvent.value.id);
                localStorage.setItem('academicEvents', JSON.stringify(events.value));
                renderEvents();
                closeModal();
            }
        };
        // ----------------------------------
        // End Component: Event Management
        // ----------------------------------

        // ----------------------------------
        // Component: Programming Management
        // ----------------------------------
        const openProgrammingModal = () => {
            if (showTimeline.value) return;
            showProgrammingModal.value = true;
            programmingEventsJson.value = null;
            nextTick(() => {
                if (programmingDateRangePicker.value) {
                    programmingFlatpickrInstance = flatpickr(programmingDateRangePicker.value, {
                        mode: 'range',
                        dateFormat: 'Y-m-d',
                        locale: 'es',
                        onChange: (selectedDates) => {
                            if (selectedDates.length === 2) {
                                programmingRange.value.start = selectedDates[0].toISOString().split('T')[0];
                                programmingRange.value.end = selectedDates[1].toISOString().split('T')[0];
                            }
                        }
                    });
                }
            });
        };

        const closeProgrammingModal = () => {
            showProgrammingModal.value = false;
            programmingRange.value = { start: '', end: '' };
            programmingEventsJson.value = null;
            if (programmingFlatpickrInstance) {
                programmingFlatpickrInstance.destroy();
                programmingFlatpickrInstance = null;
            }
        };

        const generateProgrammingJson = () => {
            if (!programmingRange.value.start || !programmingRange.value.end) {
                alert('Por favor, selecciona un rango de fechas.');
                return;
            }
            const startDate = new Date(programmingRange.value.start);
            const endDate = new Date(programmingRange.value.end);
            const filteredEvents = events.value.filter(event => {
                const eventStart = new Date(event.startDate);
                return eventStart >= startDate && eventStart <= endDate;
            });
            programmingEventsJson.value = JSON.stringify(filteredEvents, null, 2);
        };
        // ----------------------------------
        // End Component: Programming Management
        // ----------------------------------

        // ----------------------------------
        // Component: Periodo Management
        // ----------------------------------
        const showPeriodoForm = ref(false);
        const selectedPeriodos = ref([]);
        const periodoFilter = ref('');
        const centroFilter = ref('');
        // <!-- VISOR_PDF_START -->
        const showVisorPDF = ref(false);
        // <!-- VISOR_PDF_END -->

const uniquePeriodos = computed(() => {
    return [...new Set(periodos.value.map(p => p.periodo))].sort();
});

const filteredPeriodos = computed(() => {
    return periodos.value.filter(periodo => {
        const matchesPeriodo = !periodoFilter.value || periodo.periodo === periodoFilter.value;
        const matchesCentro = !centroFilter.value || 
            periodo.centro.toLowerCase().includes(centroFilter.value.toLowerCase());
        return matchesPeriodo && matchesCentro;
    });
});

const getSelectedSemesters = computed(() => {
    return periodoForm.value.semestres.map((selected, index) => selected ? index + 1 : null).filter(Boolean);
});

const getAsignaturasForSemester = (semestre) => {
    const asignaturasPorSemestre = {
        1: ['Matemáticas Básicas', 'Introducción a la Programación'],
        2: ['Álgebra Lineal', 'Física I'],
        3: ['Cálculo II', 'Química General'],
        4: ['Estadística', 'Electiva I'],
        5: ['Programación Avanzada', 'Economía'],
        6: ['Diseño de Sistemas', 'Electiva II'],
        7: ['Gestión de Proyectos', 'Ética Profesional'],
        8: ['Inteligencia Artificial', 'Electiva III'],
        9: ['Tesis I', 'Seminario'],
        10: ['Tesis II', 'Práctica Profesional']
    };
    return asignaturasPorSemestre[semestre] || [];
};

const openPeriodoModal = () => {
    if (showTimeline.value) return;
    showPeriodoModal.value = true;
    showPeriodoForm.value = false;
    currentPeriodo.value = null;
    selectedPeriodos.value = [];
    periodoFilter.value = '';
    centroFilter.value = '';
};

const closePeriodoModal = () => {
    showPeriodoModal.value = false;
    showPeriodoForm.value = false;
    currentPeriodo.value = null;
    selectedPeriodos.value = [];
    periodoFilter.value = '';
    centroFilter.value = '';
    periodoForm.value = {
        periodo: '2025-1',
        centro: 'CALI',
        programa: 'ADMINISTRACION PUBLICA',
        semestres: Array(10).fill(false),
        asignaturas: {}
    };
};

const openPeriodoForm = () => {
    showPeriodoForm.value = true;
    currentPeriodo.value = null;
    periodoForm.value = {
        periodo: '2025-1',
        centro: 'CALI',
        programa: 'ADMINISTRACION PUBLICA',
        semestres: Array(10).fill(false),
        asignaturas: {}
    };
    initializeAsignaturas();
};

const closePeriodoForm = () => {
    showPeriodoForm.value = false;
    currentPeriodo.value = null;
    periodoForm.value = {
        periodo: '2025-1',
        centro: 'CALI',
        programa: 'ADMINISTRACION PUBLICA',
        semestres: Array(10).fill(false),
        asignaturas: {}
    };
};

const initializeAsignaturas = () => {
    periodoForm.value.asignaturas = {};
    for (let i = 1; i <= 10; i++) {
        periodoForm.value.asignaturas[i] = {};
        getAsignaturasForSemester(i).forEach(asignatura => {
            periodoForm.value.asignaturas[i][asignatura] = '';
        });
    }
};

const editPeriodo = (periodo) => {
    currentPeriodo.value = periodo;
    periodoForm.value = JSON.parse(JSON.stringify(periodo));
    showPeriodoForm.value = true;
    initializeAsignaturas();
    Object.keys(periodo.asignaturas).forEach(semestre => {
        Object.keys(periodo.asignaturas[semestre]).forEach(asignatura => {
            if (periodoForm.value.asignaturas[semestre]) {
                periodoForm.value.asignaturas[semestre][asignatura] = periodo.asignaturas[semestre][asignatura];
            }
        });
    });
};

const savePeriodo = () => {
    if (!periodoForm.value.periodo || !periodoForm.value.centro || !periodoForm.value.programa) {
        alert('Todos los campos principales son requeridos.');
        return;
    }
    const periodoData = {
        id: currentPeriodo.value ? currentPeriodo.value.id : Date.now().toString(),
        periodo: periodoForm.value.periodo,
        centro: periodoForm.value.centro,
        programa: periodoForm.value.programa,
        semestres: [...periodoForm.value.semestres],
        asignaturas: JSON.parse(JSON.stringify(periodoForm.value.asignaturas))
    };
    if (currentPeriodo.value) {
        const index = periodos.value.findIndex(p => p.id === currentPeriodo.value.id);
        if (index !== -1) periodos.value[index] = periodoData;
    } else {
        periodos.value.push(periodoData);
    }
    localStorage.setItem('periodos', JSON.stringify(periodos.value));
    closePeriodoForm();
};

const deletePeriodo = (id) => {
    if (confirm('¿Estás seguro de eliminar este periodo?')) {
        periodos.value = periodos.value.filter(p => p.id !== id);
        selectedPeriodos.value = selectedPeriodos.value.filter(pid => pid !== id);
        localStorage.setItem('periodos', JSON.stringify(periodos.value));
    }
};

const toggleAllSemesters = () => {
    const allSelected = periodoForm.value.semestres.every(s => s);
    periodoForm.value.semestres = Array(10).fill(!allSelected);
    initializeAsignaturas();
};

const applyFilters = () => {
    // Triggered by changes to periodoFilter or centroFilter, filteredPeriodos updates automatically
};

const showCronogramaTimeline = () => {
    if (!selectedPeriodos.value.length) return;

    // Close the Periodo Modal
    showPeriodoModal.value = false;

    // Show the Timeline
    if (!showTimeline.value) {
        showTimeline.value = true;
        document.getElementById('calendar').classList.add('hidden');
        document.getElementById('timeline').classList.remove('hidden');
    }

    // Generate nested groups
    const selected = periodos.value.filter(p => selectedPeriodos.value.includes(p.id));
    const groups = [];
    const items = [];

    selected.forEach(periodo => {
        const centroProgramaId = `${periodo.centro}-${periodo.programa}`;
        // Level 1: Centro + Programa
        groups.push({
            id: centroProgramaId,
            content: `${periodo.centro} - ${periodo.programa}`,
            nestedGroups: [],
            showNested: true
        });

        // Get selected semesters
        const semestres = periodo.semestres
            .map((s, i) => s ? i + 1 : null)
            .filter(Boolean);

        semestres.forEach(semestre => {
            const semestreId = `${centroProgramaId}-semestre-${semestre}`;
            // Level 2: Semestre
            groups.push({
                id: semestreId,
                content: `Semestre ${semestre}`,
                nestedGroups: [],
                showNested: true
            });
            groups.find(g => g.id === centroProgramaId).nestedGroups.push(semestreId);

            // Level 3: Asignaturas
            const asignaturas = getAsignaturasForSemester(semestre);
            asignaturas.forEach(asignatura => {
                const asignaturaId = `${semestreId}-asignatura-${asignatura}`;
                groups.push({
                    id: asignaturaId,
                    content: asignatura
                });
                groups.find(g => g.id === semestreId).nestedGroups.push(asignaturaId);

                // Add item for asignatura if it has a tercero assigned
                const terceroId = periodo.asignaturas[semestre]?.[asignatura];
                if (terceroId) {
                    const tercero = terceros.value.find(t => t.id === terceroId);
                    // Mock dates based on period (e.g., 2025-1 starts Jan 1, 2025)
                    const year = parseInt(periodo.periodo.split('-')[0]);
                    const semester = periodo.periodo.split('-')[1];
                    const startMonth = semester === '1' ? 0 : 6; // Jan or Jul
                    const startDate = new Date(year, startMonth + (semestre - 1) * 0.5, 1);
                    const endDate = new Date(startDate);
                    endDate.setMonth(startDate.getMonth() + 0.5); // ~2 weeks per asignatura

                    items.push({
                        id: `${periodo.id}-${semestre}-${asignatura}`,
                        content: `${asignatura} (${tercero ? tercero.nombreTercero : 'Sin tercero'})`,
                        start: startDate,
                        end: endDate,
                        group: asignaturaId,
                        style: 'background-color: #3b82f6; border-color: #2563eb'
                    });
                }
            });
        });
    });

    // Update Timeline
    nextTick(() => {
        if (timelineContainer.value) {
            if (timeline) {
                timeline.destroy();
                timeline = null;
            }
            const visGroups = new vis.DataSet(groups);
            const visItems = new vis.DataSet(items);
            timeline = new vis.Timeline(timelineContainer.value, visItems, visGroups, {
                start: new Date(2025, 0, 1),
                end: new Date(2025, 11, 31),
                editable: false,
                groupOrder: 'content',
                zoomMin: 1000 * 60 * 60 * 24 * 7, // 1 week
                zoomMax: 1000 * 60 * 60 * 24 * 365, // 1 year
                timeAxis: { scale: 'month', step: 1 },
                format: {
                    minorLabels: (date, scale) => {
                        const jsDate = date._isAMomentObject ? date.toDate() : new Date(date);
                        if (scale === 'month') {
                            return jsDate.toLocaleDateString('es-ES', { month: 'short', day: 'numeric' });
                        }
                        return '';
                    },
                    majorLabels: (date) => {
                        const jsDate = date._isAMomentObject ? date.toDate() : new Date(date);
                        return jsDate.toLocaleDateString('es-ES', { year: 'numeric', month: 'long' });
                    }
                }
            });
        }
    });
};
// ----------------------------------
// End Component: Periodo Management
// ----------------------------------

        // ----------------------------------
        // Component: Timeline Management
        // ----------------------------------
        const toggleTimeline = () => {
            showTimeline.value = !showTimeline.value;
            if (showTimeline.value) {
                document.getElementById('calendar').classList.add('hidden');
                document.getElementById('timeline').classList.remove('hidden');
                nextTick(() => {
                    initializeTimeline();
                });
            } else {
                document.getElementById('calendar').classList.remove('hidden');
                document.getElementById('timeline').classList.add('hidden');
                if (timeline) {
                    timeline.destroy();
                    timeline = null;
                }
                renderEvents();
            }
        };

        const formatDateRange = (startDate, endDate) => {
            const start = new Date(startDate);
            const end = new Date(endDate);
            return `${start.toLocaleDateString('es-ES')} - ${end.toLocaleDateString('es-ES')}`;
        };

        const formatDate = (date) => {
            const d = new Date(date);
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        };

        const parseDate = (dateStr) => {
            const [year, month, day] = dateStr.split('-').map(Number);
            return new Date(year, month - 1, day);
        };

        const initializeTimeline = () => {
            if (timelineContainer.value && !timeline) {
                const items = new vis.DataSet(events.value.map(event => ({
                    id: event.id,
                    content: event.title,
                    group: event.terceroId,
                    start: new Date(event.startDate),
                    end: new Date(event.endDate),
                    style: `background-color: ${event.color}; border-color: ${darkenColor(event.color, 20)}`
                })));

                const groups = new vis.DataSet(terceros.value.map(tercero => ({
                    id: tercero.id,
                    content: tercero.nombreTercero
                })));

                timeline = new vis.Timeline(timelineContainer.value, items, groups, {
                    start: new Date("2025-04-01"),
                    end: new Date("2025-04-30"),
                    editable: true,
                    groupOrder: 'content',
                    onAdd: (item, callback) => {
                        timelineModalState.isOpen = true;
                        timelineModalState.action = 'add';
                        timelineModalState.eventData = {
                            id: '',
                            content: item.content || '',
                            group: item.group || terceros.value[0]?.id || '',
                            start: item.start ? formatDate(item.start) : '',
                            end: item.end ? formatDate(item.end) : ''
                        };
                        callback(null);
                    },
                    onMove: (item, callback) => {
                        const tooltip = document.getElementById('tooltip');
                        tooltip.style.display = 'block';
                        tooltip.style.left = event.pageX + 10 + 'px';
                        tooltip.style.top = event.pageY + 10 + 'px';
                        tooltip.innerHTML = `Ítem movido: ${item.content}<br>Nueva fecha: ${formatDate(item.start)}`;
                        setTimeout(() => { tooltip.style.display = 'none'; }, 2000);
                        callback(item);
                        const eventIndex = events.value.findIndex(e => e.id === item.id);
                        if (eventIndex !== -1) {
                            events.value[eventIndex] = {
                                ...events.value[eventIndex],
                                startDate: formatDate(item.start) + 'T00:00:00',
                                endDate: formatDate(item.end) + 'T00:00:00'
                            };
                            localStorage.setItem('academicEvents', JSON.stringify(events.value));
                        }
                    },
                    onUpdate: (item, callback) => {
                        timelineModalState.isOpen = true;
                        timelineModalState.action = 'edit';
                        timelineModalState.eventData = {
                            id: item.id,
                            content: item.content,
                            group: item.group,
                            start: formatDate(item.start),
                            end: formatDate(item.end)
                        };
                        callback(null);
                    },
                    tooltip: {
                        followMouse: true,
                        overflowMethod: 'cap'
                    },
                    zoomMin: 1000 * 60 * 60 * 24 * 14,
                    zoomMax: 1000 * 60 * 60 * 24 * 180,
                    timeAxis: { scale: 'day', step: 1 },
                    format: {
                        minorLabels: function (date, scale, step) {
                            const jsDate = new Date(date);
                            if (scale === 'day') {
                                const dayName = jsDate.toLocaleDateString('es-ES', { weekday: 'short' });
                                const dayNumber = jsDate.getDate();
                                return `${dayName} ${dayNumber}`;
                            }
                            return '';
                        },
                        majorLabels: function (date, scale, step) {
                            const jsDate = new Date(date);
                            if (scale === 'day') {
                                return jsDate.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' });
                            }
                            return '';
                        }
                    }
                });

                timeline.on('doubleClick', (props) => {
                    if (props.item) {
                        const item = items.get(props.item);
                        if (item) {
                            timelineModalState.isOpen = true;
                            timelineModalState.action = 'edit';
                            timelineModalState.eventData = {
                                id: item.id,
                                content: item.content,
                                group: item.group,
                                start: formatDate(item.start),
                                end: formatDate(item.end)
                            };
                        }
                    }
                });

                timeline.on('contextmenu', (props) => {
                    props.event.preventDefault();
                    if (!props.item) {
                        const start = new Date(props.time);
                        start.setHours(0, 0, 0, 0);
                        const end = new Date(start);
                        end.setDate(start.getDate() + 1);
                        timelineModalState.isOpen = true;
                        timelineModalState.action = 'add';
                        timelineModalState.eventData = {
                            id: '',
                            content: '',
                            group: props.group || terceros.value[0]?.id || '',
                            start: formatDate(start),
                            end: formatDate(end)
                        };
                    }
                });

                timeline.on('changed', () => {
                    const cells = document.querySelectorAll('.vis-time-axis .vis-grid');
                    cells.forEach(cell => {
                        cell.style.width = '5px';
                    });
                });
            }
        };

        const closeTimelineModal = () => {
            timelineModalState.isOpen = false;
            timelineModalState.eventData = { id: '', content: '', group: '', start: '', end: '' };
        };

        const handleTimelineModalSubmit = () => {
            const { id, content, group, start, end } = timelineModalState.eventData;
            const startDate = parseDate(start);
            const endDate = parseDate(end);

            if (endDate < startDate) {
                alert('La fecha de fin debe ser posterior a la fecha de inicio');
                return;
            }

            const tercero = terceros.value.find(t => t.id === group);
            const eventData = {
                id: id || Date.now().toString(),
                title: content,
                description: '',
                startDate: formatDate(startDate) + 'T00:00:00',
                endDate: formatDate(endDate) + 'T00:00:00',
                color: '#3b82f6',
                terceroId: group
            };

            if (id) {
                const index = events.value.findIndex(e => e.id === id);
                if (index !== -1) {
                    events.value[index] = eventData;
                }
            } else {
                events.value.push(eventData);
            }

            localStorage.setItem('academicEvents', JSON.stringify(events.value));
            if (timeline) {
                timeline.destroy();
                timeline = null;
                initializeTimeline();
            }
            closeTimelineModal();
        };
        // ----------------------------------
        // End Component: Timeline Management
        // ----------------------------------


      // <!-- VISOR_PDF_START -->
        const toggleVisorPDF = () => {
            showVisorPDF.value = !showVisorPDF.value;
            showTimeline.value = false;
            if (showVisorPDF.value) {
                document.getElementById('calendar').classList.add('hidden');
                document.getElementById('timeline').classList.add('hidden');
                document.getElementById('visorPDF').classList.remove('hidden');
            } else {
                document.getElementById('calendar').classList.remove('hidden');
                document.getElementById('visorPDF').classList.add('hidden');
                renderEvents();
            }
        };

        const generatePDF = () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const element = document.getElementById('pf1');
            doc.html(element, {
                callback: function (pdf) {
                    pdf.save('comision_servicios.pdf');
                },
                x: 10,
                y: 10,
                width: 190,
                windowWidth: element.scrollWidth
            });
        };
        // <!-- VISOR_PDF_END -->
      
      
        // ----------------------------------
        // Component: Lifecycle Hooks
        // ----------------------------------
        onMounted(async () => {
            await loadTerceros();
            const calendarEl = document.getElementById('calendar');
            const calendar = new FullCalendar.Calendar(calendarEl, {
                locale: 'es',
                initialView: currentView.value,
                headerToolbar: false,
                firstDay: 1,
                dayHeaderFormat: { weekday: 'long' },
                height: '100%',
                contentHeight: '100%',
                eventClick: editEvent,
                dateClick: function(info) {
                    openModal(info.dateStr);
                },
                eventDisplay: 'block',
                eventTimeFormat: { hour: '2-digit', minute: '2-digit', hour12: false },
                eventDidMount: function(info) {
                    if (info.event.allDay && info.event.start && info.event.end) {
                        const start = info.event.start;
                        const end = info.event.end;
                        const duration = (end - start) / (1000 * 60 * 60 * 24);
                        if (duration > 1) {
                            info.el.style.borderLeftWidth = '4px';
                            info.el.style.borderLeftStyle = 'solid';
                            info.el.style.borderLeftColor = darkenColor(info.event.backgroundColor, 20);
                        }
                    }
                },
                dayHeaderContent: function(arg) {
                    const dayName = arg.text.charAt(0).toUpperCase() + arg.text.slice(1);
                    return { html: `<div>${dayName}</div>` };
                },
                views: {
                    dayGridMonth: {
                        dayMaxEventRows: limitEvents.value ? 4 : false,
                        dayMaxEvents: limitEvents.value ? 4 : false,
                        fixedWeekCount: false,
                        aspectRatio: 1.5
                    },
                    dayGridWeek: {
                        type: 'dayGrid',
                        duration: { weeks: 1 },
                        dayCount: 7,
                        dayMaxEventRows: false,
                        dayMaxEvents: false,
                        titleFormat: { year: 'numeric', month: 'long', day: 'numeric' },
                        dayHeaderContent: function(arg) {
                            const dayName = arg.text.charAt(0)                            .toUpperCase() + arg.text.slice(1);
                            const dayNumber = arg.date.getDate();
                            return {
                                html: `
                                    <div class="flex flex-col items-center">
                                        <span class="fc-day-name">${dayName}</span>
                                        <span class="fc-day-number">${dayNumber}</span>
                                    </div>
                                `
                            };
                        }
                    }
                },
                datesSet: function() {
                    updateTitle();
                }
            });

            calendarApi.value = calendar;
            calendar.render();
            renderEvents();
             // Aqui @Luis----------------

            // <!-- VISOR_PDF_START -->
            // Initialize theViewer for PDF rendering
            try {
                if (typeof theViewer !== 'undefined') {
                    theViewer({
                        container: '#page-container',
                        outline: '#outline',
                        loadingIndicator: '.loading-indicator'
                    });
                }
            } catch (e) {
                console.error('Error initializing PDF viewer:', e);
                const pageContainer = document.getElementById('page-container');
                if (pageContainer) {
                    pageContainer.style.display = 'block';
                }
            }
            // <!-- VISOR_PDF_END -->
        });

        onUnmounted(() => {
            if (calendarApi.value) {
                calendarApi.value.destroy();
                calendarApi.value = null;
            }
            if (timeline) {
                timeline.destroy();
                timeline = null;
            }
            if (flatpickrInstance) {
                flatpickrInstance.destroy();
                flatpickrInstance = null;
            }
            if (programmingFlatpickrInstance) {
                programmingFlatpickrInstance.destroy();
                programmingFlatpickrInstance = null;
            }
            // <!-- VISOR_PDF_START -->
            // Cleanup theViewer if necessary
            if (theViewer.defaultViewer) {
                theViewer.defaultViewer = null;
            }
            // <!-- VISOR_PDF_END -->
        });
        // ----------------------------------
        // End Component: Lifecycle Hooks
        // ----------------------------------

       // Exposed methods and properties
return {
    // Calendar state and methods
    currentView,
    setView,
    navigate,
    goToToday,
    getTitle,
    limitEvents,
    toggleEventLimit,

    // Event Modal state and methods
    showModal,
    currentEvent,
    form,
    error,
    dateRangePicker,
    saveEvent,
    closeModal,
    deleteEvent,

    // Programming Modal state and methods
    showProgrammingModal,
    openProgrammingModal,
    closeProgrammingModal,
    programmingDateRangePicker,
    programmingEventsJson,
    generateProgrammingJson,

    // Terceros Modal state and methods
    showTercerosModal,
    openTercerosModal,
    closeTercerosModal,
    terceros,
    searchQuery,
    showOptions,
    filteredTerceros,
    filterTerceros,
    selectTercero,
    hideOptions,
    showTerceroForm,
    openTerceroForm,
    closeTerceroForm,
    terceroForm,
    currentTercero,
    editTercero,
    saveTercero,
    deleteTercero,

    // Periodo Modal state and methods
    showPeriodoModal,
    openPeriodoModal,
    closePeriodoModal,
    periodos,
    currentPeriodo,
    periodoForm,
    showPeriodoForm,
    openPeriodoForm,
    closePeriodoForm,
    getSelectedSemesters,
    getAsignaturasForSemester,
    toggleAllSemesters,
    savePeriodo,
    editPeriodo,
    deletePeriodo,
    selectedPeriodos,
    periodoFilter,
    centroFilter,
    uniquePeriodos,
    filteredPeriodos,
    applyFilters,
    showCronogramaTimeline,

    // Timeline state and methods
    showTimeline,
    toggleTimeline,
    timelineContainer,
    timelineModalState,
    closeTimelineModal,
    handleTimelineModalSubmit,
    // <!-- VISOR_PDF_START -->
    showVisorPDF,
    toggleVisorPDF,
    generatePDF
    // <!-- VISOR_PDF_END -->
};
        // End Exposed methods and properties
    }
});

// Mount the Vue app
app.mount('#app');
// ----------------------------------
// End Component: Main App
// ----------------------------------
</script>
  
</body>
</html>
